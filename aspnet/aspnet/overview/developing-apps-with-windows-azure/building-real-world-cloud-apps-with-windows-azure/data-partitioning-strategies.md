---
uid: aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/data-partitioning-strategies
title: "数据分区策略 （使用 Azure 构建真实世界云应用） |Microsoft 文档"
author: MikeWasson
description: "构建真实世界云应用程序与 Azure 的电子书基于由 Scott Guthrie 的演示。 它还说明了 13 模式和实践，他可以..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 06/12/2014
ms.topic: article
ms.assetid: 513837a7-cfea-4568-a4e9-1f5901245d24
ms.technology: 
ms.prod: .net-framework
msc.legacyurl: /aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/data-partitioning-strategies
msc.type: authoredcontent
ms.openlocfilehash: 8eddb7af2d9032153b30ab54d5e882f0b46cd4ce
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 11/10/2017
---
<a name="data-partitioning-strategies-building-real-world-cloud-apps-with-azure"></a><span data-ttu-id="5433b-104">数据分区策略 （使用 Azure 构建真实世界云应用）</span><span class="sxs-lookup"><span data-stu-id="5433b-104">Data Partitioning Strategies (Building Real-World Cloud Apps with Azure)</span></span>
====================
<span data-ttu-id="5433b-105">通过[Mike Wasson](https://github.com/MikeWasson)， [Rick Anderson](https://github.com/Rick-Anderson)， [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="5433b-105">by [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson](https://github.com/Rick-Anderson), [Tom Dykstra](https://github.com/tdykstra)</span></span>

<span data-ttu-id="5433b-106">[下载修复此错误项目](http://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4)或[下载电子书](http://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span><span class="sxs-lookup"><span data-stu-id="5433b-106">[Download Fix It Project](http://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) or [Download E-book](http://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span></span>

> <span data-ttu-id="5433b-107">**构建真实世界云应用程序与 Azure**电子书基于由 Scott Guthrie 的演示。</span><span class="sxs-lookup"><span data-stu-id="5433b-107">The **Building Real World Cloud Apps with Azure** e-book is based on a presentation developed by Scott Guthrie.</span></span> <span data-ttu-id="5433b-108">它还说明了 13 模式和实践，从而帮助你为成功开发适用于云中的 web 应用。</span><span class="sxs-lookup"><span data-stu-id="5433b-108">It explains 13 patterns and practices that can help you be successful developing web apps for the cloud.</span></span> <span data-ttu-id="5433b-109">有关序列的信息，请参阅[第一章](introduction.md)。</span><span class="sxs-lookup"><span data-stu-id="5433b-109">For information about the series, see [the first chapter](introduction.md).</span></span>


<span data-ttu-id="5433b-110">前面我们已了解通过添加和删除 web 服务器扩展的云应用程序，web 层是多么容易。</span><span class="sxs-lookup"><span data-stu-id="5433b-110">Earlier we saw how easy it is to scale the web tier of a cloud application, by adding and removing web servers.</span></span> <span data-ttu-id="5433b-111">但是，如果它们在所有达到相同的数据存储，你的应用程序瓶颈从前端移到后端，并且数据层，最难缩放。</span><span class="sxs-lookup"><span data-stu-id="5433b-111">But if they're all hitting the same data store, your application's bottleneck moves from the front-end to the back-end, and the data tier is the hardest to scale.</span></span> <span data-ttu-id="5433b-112">本章我们了解如何，通过将数据分区为多个关系数据库，或通过将与其他数据存储选项结合使用关系数据库存储，可以使数据层可缩放。</span><span class="sxs-lookup"><span data-stu-id="5433b-112">In this chapter we look at how you can make your data tier scalable by partitioning data into multiple relational databases, or by combining relational database storage with other data storage options.</span></span>

<span data-ttu-id="5433b-113">设置分区方案是最佳完成提前与前面所述相同的原因： 很难，若要在应用程序在生产中之后，更改你的数据存储策略。</span><span class="sxs-lookup"><span data-stu-id="5433b-113">Setting up a partitioning scheme is best done up front for the same reason mentioned earlier: it's very difficult to change your data storage strategy after an app is in production.</span></span> <span data-ttu-id="5433b-114">如果你考虑硬提前不同的方法，你可以避免"Twitter 片刻"时你的应用程序崩溃或长时间出现故障，而重新组织您的应用程序数据和数据访问代码。</span><span class="sxs-lookup"><span data-stu-id="5433b-114">If you think hard up front about different approaches, you can avoid having a "Twitter moment" when your app crashes or goes down for a long time while you reorganize your app's data and data access code.</span></span>

## <a name="the-three-vs-of-data-storage"></a><span data-ttu-id="5433b-115">数据存储在三个 Vs</span><span class="sxs-lookup"><span data-stu-id="5433b-115">The three Vs of data storage</span></span>

<span data-ttu-id="5433b-116">为了确定是否需要分区策略和它应该是什么，请考虑你的数据有关的三个问题：</span><span class="sxs-lookup"><span data-stu-id="5433b-116">In order to determine whether you need a partitioning strategy and what it should be, consider three questions about your data:</span></span>

- <span data-ttu-id="5433b-117">卷 – 数据量将你最终存储？</span><span class="sxs-lookup"><span data-stu-id="5433b-117">Volume – How much data will you ultimately store?</span></span> <span data-ttu-id="5433b-118">几千兆字节？</span><span class="sxs-lookup"><span data-stu-id="5433b-118">A couple gigabytes?</span></span> <span data-ttu-id="5433b-119">几个几百千兆字节为单位？</span><span class="sxs-lookup"><span data-stu-id="5433b-119">A couple hundred gigabytes?</span></span> <span data-ttu-id="5433b-120">兆兆字节？</span><span class="sxs-lookup"><span data-stu-id="5433b-120">Terabytes?</span></span> <span data-ttu-id="5433b-121">Petabytes？</span><span class="sxs-lookup"><span data-stu-id="5433b-121">Petabytes?</span></span>
- <span data-ttu-id="5433b-122">速度 – 你的数据会的速率是什么？</span><span class="sxs-lookup"><span data-stu-id="5433b-122">Velocity – What is the rate at which your data will grow?</span></span> <span data-ttu-id="5433b-123">它是不生成大量数据的内部应用？</span><span class="sxs-lookup"><span data-stu-id="5433b-123">Is it an internal app that isn't generating a lot of data?</span></span> <span data-ttu-id="5433b-124">将上载客户，图像和视频到外部应用程序？</span><span class="sxs-lookup"><span data-stu-id="5433b-124">An external app that customers will be uploading images and videos into?</span></span>
- <span data-ttu-id="5433b-125">各种 – 哪种类型的数据将你存储？</span><span class="sxs-lookup"><span data-stu-id="5433b-125">Variety – What type of data will you store?</span></span> <span data-ttu-id="5433b-126">关系，图像、 键-值对、 社交关系图？</span><span class="sxs-lookup"><span data-stu-id="5433b-126">Relational, images, key-value pairs, social graphs?</span></span>

<span data-ttu-id="5433b-127">如果你认为你要有大量的卷、 速度或各种，你必须仔细考虑哪种类型的分区方案最启用您的应用程序缩放高效且有效地增加，以及以确保不会遇到任何瓶颈。</span><span class="sxs-lookup"><span data-stu-id="5433b-127">If you think you're going to have a lot of volume, velocity, or variety, you have to carefully consider what kind of partitioning scheme will best enable your app to scale efficiently and effectively as it grows, and to ensure you don't run into any bottlenecks.</span></span>

<span data-ttu-id="5433b-128">主要有三种分区的方法：</span><span class="sxs-lookup"><span data-stu-id="5433b-128">There are basically three approaches to partitioning:</span></span>

- <span data-ttu-id="5433b-129">垂直分区</span><span class="sxs-lookup"><span data-stu-id="5433b-129">Vertical partitioning</span></span>
- <span data-ttu-id="5433b-130">水平分区</span><span class="sxs-lookup"><span data-stu-id="5433b-130">Horizontal partitioning</span></span>
- <span data-ttu-id="5433b-131">混合分区</span><span class="sxs-lookup"><span data-stu-id="5433b-131">Hybrid partitioning</span></span>

## <a name="vertical-partitioning"></a><span data-ttu-id="5433b-132">垂直分区</span><span class="sxs-lookup"><span data-stu-id="5433b-132">Vertical partitioning</span></span>

<span data-ttu-id="5433b-133">垂直 portioning 就像拆分表的列： 一组列将进入一个数据存储和另一组列会进入不同的数据存储。</span><span class="sxs-lookup"><span data-stu-id="5433b-133">Vertical portioning is like splitting up a table by columns: one set of columns goes into one data store, and another set of columns goes into a different data store.</span></span>

<span data-ttu-id="5433b-134">例如，假设我的应用程序存储数据的人员，包括映像：</span><span class="sxs-lookup"><span data-stu-id="5433b-134">For example, suppose my app stores data about people, including images:</span></span>

![数据表](data-partitioning-strategies/_static/image1.png)

<span data-ttu-id="5433b-136">当表示此类数据作为表并查看不同类型的数据时，你可以查看在左侧的三个列具有可以高效地存储通过关系数据库中，在右侧的两个列时实质上是字节数组的字符串数据，c从图像文件 ome。</span><span class="sxs-lookup"><span data-stu-id="5433b-136">When you represent this data as a table and look at the different varieties of data, you can see that the three columns on the left have string data that can be efficiently stored by a relational database, while the two columns on the right are essentially byte arrays that come from image files.</span></span> <span data-ttu-id="5433b-137">可以存储图像文件数据的关系数据库中，但很多人这样做是因为它们不想将数据保存到文件系统。</span><span class="sxs-lookup"><span data-stu-id="5433b-137">It's possible to storage image file data in a relational database, and a lot of people do that because they don't want to save the data to the file system.</span></span> <span data-ttu-id="5433b-138">它们可能不具有能够存储的数据所需的卷的文件系统，或者它们可能不想要管理单独备份和还原系统。</span><span class="sxs-lookup"><span data-stu-id="5433b-138">They might not have a file system capable of storing the required volumes of data or they might not want to manage a separate back-up and restore system.</span></span> <span data-ttu-id="5433b-139">此方法适用适用于本地数据库和适用于少量的云数据库中的数据。</span><span class="sxs-lookup"><span data-stu-id="5433b-139">This approach works well for on-premises databases and for small amounts of data in cloud databases.</span></span> <span data-ttu-id="5433b-140">在本地环境中，它可能更轻松地只需让数据库管理员负责的一切内容。</span><span class="sxs-lookup"><span data-stu-id="5433b-140">In the on-premises environment, it might be easier to just let the DBA take care of everything.</span></span>

<span data-ttu-id="5433b-141">但在云数据库中，存储代价相对较大，并且有很高的映像无法使超出速率它可以有效地限制增长的数据库的大小。</span><span class="sxs-lookup"><span data-stu-id="5433b-141">But in a cloud database, storage is relatively expensive, and a high volume of images could make the size of the database grow beyond the limits at which it can operate efficiently.</span></span> <span data-ttu-id="5433b-142">可以通过将数据垂直分区解决这些问题，这意味着在你的数据的表中选择最合适的数据存储区为每个列。</span><span class="sxs-lookup"><span data-stu-id="5433b-142">You can address these problems by partitioning the data vertically, which means you choose the most appropriate data store for each column in your table of data.</span></span> <span data-ttu-id="5433b-143">新增功能可能适合于此示例是将字符串数据放在关系数据库和 Blob 存储中的映像中。</span><span class="sxs-lookup"><span data-stu-id="5433b-143">What might work best for this example is to put the string data in a relational database and the images in Blob storage.</span></span>

![垂直分区的数据表](data-partitioning-strategies/_static/image2.png)

<span data-ttu-id="5433b-145">将映像存储在 Blob 存储而非数据库是在本地环境中比云中更为可行，因为你不必担心如何设置文件服务器或管理备份和还原存储在关系数据库之外的数据： 所有为你自动由处理 Blob 存储服务。</span><span class="sxs-lookup"><span data-stu-id="5433b-145">Storing images in Blob storage instead of a database is more practical in the cloud than in an on-premises environment because you don't have to worry about setting up file servers or managing back-up and restore of data stored outside of the relational database: all that is handled for you automatically by the Blob storage service.</span></span>

<span data-ttu-id="5433b-146">这是分区方法中修复该应用程序中，我们实现和我们在该代码将查看[Blob 存储章](unstructured-blob-storage.md)。</span><span class="sxs-lookup"><span data-stu-id="5433b-146">This is the partitioning approach we implemented in the Fix It app, and we'll look at the code for that in the [Blob storage chapter](unstructured-blob-storage.md).</span></span> <span data-ttu-id="5433b-147">如果没有此分区方案和假设 3 兆字节为单位的平均图像大小，修复它应用仅会能够存储才命中 150 千兆字节的最大数据库大小约 40000 个任务。</span><span class="sxs-lookup"><span data-stu-id="5433b-147">Without this partitioning scheme, and assuming an average image size of 3 megabytes, the Fix It app would only be able to store about 40,000 tasks before hitting the maximum database size of 150 gigabytes.</span></span> <span data-ttu-id="5433b-148">删除映像之后，数据库可以存储 10 次为许多任务;你可以更长的时间之前，你需要考虑实现水平分区方案。</span><span class="sxs-lookup"><span data-stu-id="5433b-148">After removing the images, the database can store 10 times as many tasks; you can go much longer before you have to think about implementing a horizontal partitioning scheme.</span></span> <span data-ttu-id="5433b-149">作为应用程序可以进行扩展，您的费用更慢增长因为你的存储需求的大容量正进入非常成本较低的 Blob 存储。</span><span class="sxs-lookup"><span data-stu-id="5433b-149">And as the app scales, your expenses grow more slowly because the bulk of your storage needs are going into very inexpensive Blob storage.</span></span>

## <a name="horizontal-partitioning-sharding"></a><span data-ttu-id="5433b-150">水平分区 （分片）</span><span class="sxs-lookup"><span data-stu-id="5433b-150">Horizontal partitioning (sharding)</span></span>

<span data-ttu-id="5433b-151">水平 portioning 就像表按行拆分： 的行的一组将进入一个数据存储，并在另一组行中断到不同的数据存储区。</span><span class="sxs-lookup"><span data-stu-id="5433b-151">Horizontal portioning is like splitting up a table by rows: one set of rows goes into one data store, and another set of rows goes into a different data store.</span></span>

<span data-ttu-id="5433b-152">提供相同的数据集，另一个选项是在不同的数据库中存储的客户名称不同的范围。</span><span class="sxs-lookup"><span data-stu-id="5433b-152">Given the same set of data, another option would be to store different ranges of customer names in different databases.</span></span>

![水平分区的数据表](data-partitioning-strategies/_static/image3.png)

<span data-ttu-id="5433b-154">你想要格外小心以确保数据均匀地分布以避免产生热点你分片方案。</span><span class="sxs-lookup"><span data-stu-id="5433b-154">You want to be very careful about your sharding scheme to make sure that data is evenly distributed in order to avoid hot spots.</span></span> <span data-ttu-id="5433b-155">这个简单的示例，使用姓氏的第一个字母不能满足该需求，因为很多人具有以某些常见的字母开头的姓氏。</span><span class="sxs-lookup"><span data-stu-id="5433b-155">This simple example using the first letter of the last name doesn't meet that requirement, because a lot of people have last names that start with certain common letters.</span></span> <span data-ttu-id="5433b-156">将早于你所料因为某些数据库将变得很大，而大多数将保持较小命中表的大小限制。</span><span class="sxs-lookup"><span data-stu-id="5433b-156">You'd hit table size limitations earlier than you might expect because some databases would get very large while most would remain small.</span></span>

<span data-ttu-id="5433b-157">水平分区的缺点是，因此可能很难跨所有数据都执行的查询。</span><span class="sxs-lookup"><span data-stu-id="5433b-157">A down side of horizontal partitioning is that it might be hard to do queries across all of the data.</span></span> <span data-ttu-id="5433b-158">在此示例中，查询必须绘制来自最多 26 个不同的数据库，若要获取所有应用所存储的数据。</span><span class="sxs-lookup"><span data-stu-id="5433b-158">In this example, a query would have to draw from up to 26 different databases to get all of the data stored by the app.</span></span>

## <a name="hybrid-partitioning"></a><span data-ttu-id="5433b-159">混合分区</span><span class="sxs-lookup"><span data-stu-id="5433b-159">Hybrid partitioning</span></span>

<span data-ttu-id="5433b-160">你可以组合垂直和水平分区。</span><span class="sxs-lookup"><span data-stu-id="5433b-160">You can combine vertical and horizontal partitioning.</span></span> <span data-ttu-id="5433b-161">例如，在示例数据，你可以在 Blob 存储中存储图像，并水平分区的字符串数据。</span><span class="sxs-lookup"><span data-stu-id="5433b-161">For example, in the example data you could store the images in Blob storage and horizontally partition the string data.</span></span>

![数据分区的表混合](data-partitioning-strategies/_static/image4.png)

## <a name="partitioning-a-production-application"></a><span data-ttu-id="5433b-163">分区生产应用程序</span><span class="sxs-lookup"><span data-stu-id="5433b-163">Partitioning a production application</span></span>

<span data-ttu-id="5433b-164">从概念上讲很容易地了解如何将工作原理的分区方案，但任何分区方案也会增加代码复杂性和带来许多新的复杂情况，你必须处理的。</span><span class="sxs-lookup"><span data-stu-id="5433b-164">Conceptually it's easy to see how a partitioning scheme would work, but any partitioning scheme does increase code complexity and introduces many new complications that you have to deal with.</span></span> <span data-ttu-id="5433b-165">如果你要将移动到 blob 存储的映像，你做什么存储服务出现故障时？</span><span class="sxs-lookup"><span data-stu-id="5433b-165">If you're moving images to blob storage, what do you do when the storage service is down?</span></span> <span data-ttu-id="5433b-166">如何处理 blob 安全？</span><span class="sxs-lookup"><span data-stu-id="5433b-166">How do you handle blob security?</span></span> <span data-ttu-id="5433b-167">如果将数据库和 blob 存储获取同步的会发生什么情况？</span><span class="sxs-lookup"><span data-stu-id="5433b-167">What happens if the database and blob storage get out of sync?</span></span> <span data-ttu-id="5433b-168">如果你是分片，您将如何处理跨所有数据库都查询？</span><span class="sxs-lookup"><span data-stu-id="5433b-168">If you're sharding, how will you handle querying across all of the databases?</span></span>

<span data-ttu-id="5433b-169">处理程序，但前提是你转到生产环境之前，你计划为其，复杂性是易于管理。</span><span class="sxs-lookup"><span data-stu-id="5433b-169">The complications are manageable so long as you're planning for them before you go to production.</span></span> <span data-ttu-id="5433b-170">未执行此操作的许多人希望它们具有更高版本。</span><span class="sxs-lookup"><span data-stu-id="5433b-170">Many people who didn't do that wish they had later.</span></span> <span data-ttu-id="5433b-171">我们的客户咨询团队 (CAT) 团队中非常大的方式，采用其应用的客户从获取有关每月一次不稳定电话呼叫的平均值和它们未进行此规划。</span><span class="sxs-lookup"><span data-stu-id="5433b-171">On average our Customer Advisory Team (CAT) team gets panicked phone calls about once a month from customers whose apps are taking off in a really big way, and they didn't do this planning.</span></span> <span data-ttu-id="5433b-172">和他们所说的内容类似的内容:"帮助 ！</span><span class="sxs-lookup"><span data-stu-id="5433b-172">And they say something like: "Help!</span></span> <span data-ttu-id="5433b-173">我将所有内容放在单个数据存储和 45 天内我要在其上运行空间不足 ！"</span><span class="sxs-lookup"><span data-stu-id="5433b-173">I put everything in a single data store, and in 45 days I'm going to run out of space on it!"</span></span> <span data-ttu-id="5433b-174">并且，如果你有大量的内置于你如何访问数据存储区的业务逻辑，并且必须使用你的应用程序的客户，没有没有合适的时间为一天就出现故障，在迁移时。</span><span class="sxs-lookup"><span data-stu-id="5433b-174">And if you have a lot of business logic built into how you access your data store and you have customers who are using your app, there's no good time to go down for a day while you migrate.</span></span> <span data-ttu-id="5433b-175">我们得到其数据 herculean 工作量来帮助客户分区经过在运行过程中使用无需停机。</span><span class="sxs-lookup"><span data-stu-id="5433b-175">We end up going through herculean efforts to help the customer partition their data on the fly with no down time.</span></span> <span data-ttu-id="5433b-176">它是非常令人兴奋和非常有点复杂，并且不适合你想要参与如果您可以避免使用它 ！</span><span class="sxs-lookup"><span data-stu-id="5433b-176">It's very exciting and very scary, and not something you want to be involved in if you can avoid it!</span></span> <span data-ttu-id="5433b-177">提前考虑这并将其集成到你的应用将使你更容易得多如果应用程序的增长更高版本。</span><span class="sxs-lookup"><span data-stu-id="5433b-177">Thinking about this up front and integrating it into your app will make your life a lot easier if the app grows later.</span></span>

## <a name="summary"></a><span data-ttu-id="5433b-178">摘要</span><span class="sxs-lookup"><span data-stu-id="5433b-178">Summary</span></span>

<span data-ttu-id="5433b-179">有效的分区方案可以启用你的云应用程序扩展到数千兆而无需瓶颈云中的数据。</span><span class="sxs-lookup"><span data-stu-id="5433b-179">An effective partitioning scheme can enable your cloud app to scale to petabytes of data in the cloud without bottlenecks.</span></span> <span data-ttu-id="5433b-180">和无需支付提前大规模机或广泛的基础结构为的方式可能就像在本地数据中心中运行应用程序。</span><span class="sxs-lookup"><span data-stu-id="5433b-180">And you don't have to pay up front for massive machines or extensive infrastructure as you might if you were running the app in an on-premises data center.</span></span> <span data-ttu-id="5433b-181">在云中可以随着您需要它，并且您要仅付款，则根据你正在使用当你使用此选项以增量方式可以增加容量。</span><span class="sxs-lookup"><span data-stu-id="5433b-181">In the cloud you can you can incrementally add capacity as you need it, and you're only paying for as much as you're using when you use it.</span></span>

<span data-ttu-id="5433b-182">在[下一章](unstructured-blob-storage.md)我们将了解如何解决它应用实施垂直分区通过将图像存储在 Blob 存储中。</span><span class="sxs-lookup"><span data-stu-id="5433b-182">In the [next chapter](unstructured-blob-storage.md) we'll see how the Fix It app implements vertical partitioning by storing images in Blob storage.</span></span>

## <a name="resources"></a><span data-ttu-id="5433b-183">资源</span><span class="sxs-lookup"><span data-stu-id="5433b-183">Resources</span></span>

<span data-ttu-id="5433b-184">有关分区策略的详细信息，请参阅以下资源。</span><span class="sxs-lookup"><span data-stu-id="5433b-184">For more information about partitioning strategies, see the following resources.</span></span>

<span data-ttu-id="5433b-185">文档：</span><span class="sxs-lookup"><span data-stu-id="5433b-185">Documentation:</span></span>

- <span data-ttu-id="5433b-186">[在 Windows Azure 云服务上的大规模服务的设计的最佳实践](https://msdn.microsoft.com/en-us/library/windowsazure/jj717232.aspx)。</span><span class="sxs-lookup"><span data-stu-id="5433b-186">[Best Practices for the Design of Large-Scale Services on Windows Azure Cloud Services](https://msdn.microsoft.com/en-us/library/windowsazure/jj717232.aspx).</span></span> <span data-ttu-id="5433b-187">Mark Simms 和 Michael Thomassy 白皮书。</span><span class="sxs-lookup"><span data-stu-id="5433b-187">White paper by Mark Simms and Michael Thomassy.</span></span>
- <span data-ttu-id="5433b-188">[Microsoft 模式和实践-云设计模式](https://msdn.microsoft.com/en-us/library/dn568099.aspx)。</span><span class="sxs-lookup"><span data-stu-id="5433b-188">[Microsoft Patterns and Practices - Cloud Design Patterns](https://msdn.microsoft.com/en-us/library/dn568099.aspx).</span></span> <span data-ttu-id="5433b-189">请参阅数据分区指南，分片模式。</span><span class="sxs-lookup"><span data-stu-id="5433b-189">See Data Partitioning guidance, Sharding pattern.</span></span>

<span data-ttu-id="5433b-190">视频：</span><span class="sxs-lookup"><span data-stu-id="5433b-190">Videos:</span></span>

- <span data-ttu-id="5433b-191">[防故障： 构建可扩展、 有弹性的云服务](https://channel9.msdn.com/Series/FailSafe)。</span><span class="sxs-lookup"><span data-stu-id="5433b-191">[FailSafe: Building Scalable, Resilient Cloud Services](https://channel9.msdn.com/Series/FailSafe).</span></span> <span data-ttu-id="5433b-192">包含 9 个部分组成的系列 Ulrich Homann、 Marc Mercuri 和 Mark Simms。</span><span class="sxs-lookup"><span data-stu-id="5433b-192">Nine-part series by Ulrich Homann, Marc Mercuri, and Mark Simms.</span></span> <span data-ttu-id="5433b-193">高级概念和体系结构原理以非常可访问且有趣方式，提供与 Microsoft 客户咨询团队 (CAT) 体验与实际客户从绘制的情景。</span><span class="sxs-lookup"><span data-stu-id="5433b-193">Presents high-level concepts and architectural principles in a very accessible and interesting way, with stories drawn from Microsoft Customer Advisory Team (CAT) experience with actual customers.</span></span> <span data-ttu-id="5433b-194">请参阅段 7 中的分区描述。</span><span class="sxs-lookup"><span data-stu-id="5433b-194">See the partitioning discussion in episode 7.</span></span>
- <span data-ttu-id="5433b-195">[构建大： 从 Windows Azure 客户的第 I 部分到的经验教训](https://channel9.msdn.com/Events/Build/2012/3-029)。Mark Simms 讨论分区方案，分片策略如何实现分片和 SQL Database 联合，开始 19:49。</span><span class="sxs-lookup"><span data-stu-id="5433b-195">[Building Big: Lessons learned from Windows Azure customers - Part I](https://channel9.msdn.com/Events/Build/2012/3-029). Mark Simms discusses partitioning schemes, sharding strategies, how to implement sharding, and SQL Database Federations, starting at 19:49.</span></span> <span data-ttu-id="5433b-196">类似于防故障系列但进入更多操作指南的详细信息。</span><span class="sxs-lookup"><span data-stu-id="5433b-196">Similar to the Failsafe series but goes into more how-to details.</span></span>

<span data-ttu-id="5433b-197">示例代码：</span><span class="sxs-lookup"><span data-stu-id="5433b-197">Sample code:</span></span>

- <span data-ttu-id="5433b-198">[云服务在 Windows Azure 中的基础知识](https://code.msdn.microsoft.com/Cloud-Service-Fundamentals-4ca72649)。</span><span class="sxs-lookup"><span data-stu-id="5433b-198">[Cloud Service Fundamentals in Windows Azure](https://code.msdn.microsoft.com/Cloud-Service-Fundamentals-4ca72649).</span></span> <span data-ttu-id="5433b-199">示例包括分片数据库的应用程序。</span><span class="sxs-lookup"><span data-stu-id="5433b-199">Sample application that includes a sharded database.</span></span> <span data-ttu-id="5433b-200">有关实现的分片方案的说明，请参阅[DAL – 分片的 RDBMS](https://blogs.msdn.com/b/windowsazure/archive/2013/09/05/dal-sharding-of-rdbms.aspx) Windows Azure 博客上。</span><span class="sxs-lookup"><span data-stu-id="5433b-200">For a description of the sharding scheme implemented, see [DAL – Sharding of RDBMS](https://blogs.msdn.com/b/windowsazure/archive/2013/09/05/dal-sharding-of-rdbms.aspx) on the Windows Azure blog.</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="5433b-201">[上一页](data-storage-options.md)
[下一页](unstructured-blob-storage.md)</span><span class="sxs-lookup"><span data-stu-id="5433b-201">[Previous](data-storage-options.md)
[Next](unstructured-blob-storage.md)</span></span>
