---
uid: web-forms/overview/deployment/configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment
title: "配置目标环境的部署属性 |Microsoft 文档"
author: jrjlee
description: "本主题介绍如何配置特定于环境的属性，以便将示例联系人管理器解决方案部署到特定目标环境..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 05/04/2012
ms.topic: article
ms.assetid: b5b86e03-b8ed-46e6-90fa-e1da88ef34e9
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/deployment/configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment
msc.type: authoredcontent
ms.openlocfilehash: f27b8376b332ff21185be0fd5c00ced7d40a20bd
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 11/10/2017
---
<a name="configuring-deployment-properties-for-a-target-environment"></a><span data-ttu-id="622a6-103">配置目标环境的部署属性</span><span class="sxs-lookup"><span data-stu-id="622a6-103">Configuring Deployment Properties for a Target Environment</span></span>
====================
<span data-ttu-id="622a6-104">通过[Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="622a6-104">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="622a6-105">下载 PDF</span><span class="sxs-lookup"><span data-stu-id="622a6-105">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="622a6-106">本主题介绍如何进行配置以将示例联系人管理器解决方案部署到特定目标环境的特定于环境的属性。</span><span class="sxs-lookup"><span data-stu-id="622a6-106">This topic describes how to configure environment-specific properties in order to deploy the sample Contact Manager solution to a specific target environment.</span></span>


<span data-ttu-id="622a6-107">本主题窗体的基于名为 Fabrikam，Inc.的虚构公司的企业部署要求的教程系列中的一部分本系列教程使用的示例解决方案 （&） #x 2014;[联系人管理器](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)来表示具有现实级别的复杂性，包括 ASP.NET MVC 3 应用程序，Windows 的 web 应用程序解决方案 （&) #x 2014;Communication Foundation (WCF) 服务和数据库项目。</span><span class="sxs-lookup"><span data-stu-id="622a6-107">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) solution&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="622a6-108">这些教程的核心的部署方法取决于中介绍的拆分项目文件方法[了解该生成过程](../web-deployment-in-the-enterprise/understanding-the-build-process.md)，在其中生成过程控制由两个项目文件 （&） #x 2014; 一个包含生成适用于每种目标环境和一个包含特定于环境的生成和部署设置的说明。</span><span class="sxs-lookup"><span data-stu-id="622a6-108">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="622a6-109">在生成期间，特定于环境的项目文件合并到环境无关的项目文件中以形成一组完整的生成说明。</span><span class="sxs-lookup"><span data-stu-id="622a6-109">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="process-overview"></a><span data-ttu-id="622a6-110">过程概述</span><span class="sxs-lookup"><span data-stu-id="622a6-110">Process Overview</span></span>

<span data-ttu-id="622a6-111">你将使用来生成和部署联系人管理器解决方案的项目文件拆分为两个物理文件：</span><span class="sxs-lookup"><span data-stu-id="622a6-111">The project file that you'll use to build and deploy the Contact Manager solution is split into two physical files:</span></span>

- <span data-ttu-id="622a6-112">一个包含世界生成设置和指令 ( *Publish.proj*文件)。</span><span class="sxs-lookup"><span data-stu-id="622a6-112">One that contains universal build settings and instructions (the *Publish.proj* file).</span></span>
- <span data-ttu-id="622a6-113">一个包含特定于环境的生成设置 (*Env Dev.proj*， *Env Stage.proj*，依次类推)。</span><span class="sxs-lookup"><span data-stu-id="622a6-113">One that contains environment-specific build settings (*Env-Dev.proj*, *Env-Stage.proj*, and so on).</span></span>

<span data-ttu-id="622a6-114">在生成期间，相应的特定于环境的项目文件合并到通用*Publish.proj*文件中以构成一组完整的生成说明。</span><span class="sxs-lookup"><span data-stu-id="622a6-114">At build time, the appropriate environment-specific project file is merged into the universal *Publish.proj* file to form a complete set of build instructions.</span></span> <span data-ttu-id="622a6-115">你可以通过创建或自定义特定于环境的项目文件的描述你自己的部署方案的设置配置部署到特定目标环境。</span><span class="sxs-lookup"><span data-stu-id="622a6-115">You can configure deployment to specific destination environments by creating or customizing environment-specific project files with settings that describe your own deployment scenario.</span></span>

<span data-ttu-id="622a6-116">大量这些值由你的目标环境的配置方式 （&） #x 2014年; 具体而言，是否你在目标 web 服务器被配置为使用 Web 部署代理服务 （远程代理） 或 Web 部署处理程序。</span><span class="sxs-lookup"><span data-stu-id="622a6-116">Lots of these values are determined by how your destination environment is configured&#x2014;in particular, whether your target web server is configured to use the Web Deployment Agent Service (the remote agent) or the Web Deploy Handler.</span></span> <span data-ttu-id="622a6-117">这些方法的详细信息并选择适当的方法自己的环境的指导，请参阅[选择用于 Web 部署的右方法](choosing-the-right-approach-to-web-deployment.md)。</span><span class="sxs-lookup"><span data-stu-id="622a6-117">For more information on these approaches, and for guidance on choosing the right approach for your own environment, see [Choosing the Right Approach to Web Deployment](choosing-the-right-approach-to-web-deployment.md).</span></span>

<span data-ttu-id="622a6-118">[联系人管理器方案](../deploying-web-applications-in-enterprise-scenarios/enterprise-web-deployment-scenario-overview.md)需要两个特定于环境的项目文件：</span><span class="sxs-lookup"><span data-stu-id="622a6-118">The [Contact Manager scenario](../deploying-web-applications-in-enterprise-scenarios/enterprise-web-deployment-scenario-overview.md) requires two environment-specific project files:</span></span>

- <span data-ttu-id="622a6-119">部署到开发人员测试环境 (*Env Dev.proj*)。</span><span class="sxs-lookup"><span data-stu-id="622a6-119">Deployment to a developer test environment (*Env-Dev.proj*).</span></span> <span data-ttu-id="622a6-120">开发人员的测试环境配置为接受使用远程代理的远程部署中所述[方案： 为 Web 部署配置测试环境](scenario-configuring-a-test-environment-for-web-deployment.md)。</span><span class="sxs-lookup"><span data-stu-id="622a6-120">The developer test environment is configured to accept remote deployments using the remote agent, as described in [Scenario: Configuring a Test Environment for Web Deployment](scenario-configuring-a-test-environment-for-web-deployment.md).</span></span> <span data-ttu-id="622a6-121">此文件需要终结点地址，以及特定于位置的设置，例如，连接字符串和服务终结点提供远程代理。</span><span class="sxs-lookup"><span data-stu-id="622a6-121">This file needs to provide the remote agent endpoint address as well as location-specific settings like connection strings and service endpoints.</span></span>
- <span data-ttu-id="622a6-122">部署到过渡环境 (*Env Stage.proj*)。</span><span class="sxs-lookup"><span data-stu-id="622a6-122">Deployment to a staging environment (*Env-Stage.proj*).</span></span> <span data-ttu-id="622a6-123">过渡环境配置为接受使用 Web 部署处理程序的远程部署中所述[方案： 配置用于 Web 部署的暂存环境](scenario-configuring-a-staging-environment-for-web-deployment.md)。</span><span class="sxs-lookup"><span data-stu-id="622a6-123">The staging environment is configured to accept remote deployments using the Web Deploy Handler, as described in [Scenario: Configuring a Staging Environment for Web Deployment](scenario-configuring-a-staging-environment-for-web-deployment.md).</span></span> <span data-ttu-id="622a6-124">此文件需要提供的 Web 部署处理程序终结点地址以及特定于位置的设置，例如连接字符串和服务终结点。</span><span class="sxs-lookup"><span data-stu-id="622a6-124">This file needs to provide the Web Deploy Handler endpoint address as well as location-specific settings like connection strings and service endpoints.</span></span>

<span data-ttu-id="622a6-125">务必要注意在特定于环境的项目文件中配置的设置不会影响 web 的内容包本身和 #x 2014年; 相反，它们控制如何部署包和时，提供了哪些参数值提取包。</span><span class="sxs-lookup"><span data-stu-id="622a6-125">It's important to note that the settings you configure in the environment-specific project file don't affect the contents of the web package itself&#x2014;instead, they control how the package is deployed and what parameter values are provided when the package is extracted.</span></span> <span data-ttu-id="622a6-126">要导入的 web 包到生产环境中所述手动[方案： 配置 Web 部署的生产环境](scenario-configuring-a-production-environment-for-web-deployment.md)和[手动安装 Web 包](../web-deployment-in-the-enterprise/manually-installing-web-packages.md)，因此，它并不重要哪些设置你使用在特定于环境的项目文件中，生成包时。</span><span class="sxs-lookup"><span data-stu-id="622a6-126">You're importing the web package into the production environment manually, as described in [Scenario: Configuring a Production Environment for Web Deployment](scenario-configuring-a-production-environment-for-web-deployment.md) and [Manually Installing Web Packages](../web-deployment-in-the-enterprise/manually-installing-web-packages.md), so it doesn't matter what settings you used in the environment-specific project file when you generated the package.</span></span> <span data-ttu-id="622a6-127">Internet 信息服务 (IIS) 管理器将提示你输入任何参数化值，如连接字符串和服务终结点时导入包。</span><span class="sxs-lookup"><span data-stu-id="622a6-127">Internet Information Services (IIS) Manager will prompt you for any parameterized values, like connection strings and service endpoints, when you import the package.</span></span>

<span data-ttu-id="622a6-128">要将联系人管理器解决方案部署到你自己的目标环境中，可以自定义此文件或可以将其用作模板，然后创建你自己的文件。</span><span class="sxs-lookup"><span data-stu-id="622a6-128">To deploy the Contact Manager solution to your own target environment, you can either customize this file or use it as a template and create your own file.</span></span>

<span data-ttu-id="622a6-129">**若要配置的联系人管理器解决方案的特定于环境的部署设置**</span><span class="sxs-lookup"><span data-stu-id="622a6-129">**To configure environment-specific deployment settings for the Contact Manager solution**</span></span>

1. <span data-ttu-id="622a6-130">在 Visual Studio 2010 中打开 ContactManager WCF 解决方案。</span><span class="sxs-lookup"><span data-stu-id="622a6-130">Open the ContactManager-WCF solution in Visual Studio 2010.</span></span>
2. <span data-ttu-id="622a6-131">在**解决方案资源管理器**窗口中，展开**发布**文件夹中，展开**EnvConfig**文件夹，然后再双击**Env Dev.proj**.</span><span class="sxs-lookup"><span data-stu-id="622a6-131">In the **Solution Explorer** window, expand the **Publish** folder, expand the **EnvConfig** folder, and then double-click **Env-Dev.proj**.</span></span>

    ![](configuring-deployment-properties-for-a-target-environment/_static/image1.png)
3. <span data-ttu-id="622a6-132">替换中的属性值*Env Dev.proj*使用正确的值为你自己的测试环境的文件。</span><span class="sxs-lookup"><span data-stu-id="622a6-132">Replace the property values in the *Env-Dev.proj* file with the correct values for your own test environment.</span></span>

    > [!NOTE]
    > <span data-ttu-id="622a6-133">此过程后面的表提供有关上述每个属性的详细信息。</span><span class="sxs-lookup"><span data-stu-id="622a6-133">The table that follows this procedure provides more information on each of these properties.</span></span>
4. <span data-ttu-id="622a6-134">保存你的工作，然后关闭*Env Dev.proj*文件。</span><span class="sxs-lookup"><span data-stu-id="622a6-134">Save your work, and then close the *Env-Dev.proj* file.</span></span>

## <a name="choosing-the-right-deployment-properties"></a><span data-ttu-id="622a6-135">选择正确的部署属性</span><span class="sxs-lookup"><span data-stu-id="622a6-135">Choosing the Right Deployment Properties</span></span>

<span data-ttu-id="622a6-136">下表介绍在示例特定于环境的项目文件中，每个属性的用途*Env Dev.proj*，并提供一些指导应提供的值。</span><span class="sxs-lookup"><span data-stu-id="622a6-136">This table describes the purpose of each property in the sample environment-specific project file, *Env-Dev.proj*, and provides some guidance on the values you should provide.</span></span>

| <span data-ttu-id="622a6-137">属性名</span><span class="sxs-lookup"><span data-stu-id="622a6-137">Property Name</span></span> | <span data-ttu-id="622a6-138">详细信息</span><span class="sxs-lookup"><span data-stu-id="622a6-138">Details</span></span> |
| --- | --- |
| <span data-ttu-id="622a6-139">**MSDeployComputerName**目标 web 服务器或服务终结点的名称。</span><span class="sxs-lookup"><span data-stu-id="622a6-139">**MSDeployComputerName** The name of the destination web server or service endpoint.</span></span> | <span data-ttu-id="622a6-140">如果你正在部署到目标 web 服务器上的远程代理服务，则可以指定的目标计算机名称 (例如， **TESTWEB1**或**TESTWEB1.fabrikam.net**)，也可以指定远程代理终结点 (例如， `http://TESTWEB1/MSDEPLOYAGENTSERVICE`)。</span><span class="sxs-lookup"><span data-stu-id="622a6-140">If you're deploying to the remote agent service on the destination web server, you can specify the target computer name (for example, **TESTWEB1** or **TESTWEB1.fabrikam.net**), or you can specify the remote agent endpoint (for example, `http://TESTWEB1/MSDEPLOYAGENTSERVICE`).</span></span> <span data-ttu-id="622a6-141">部署中每个用例的相同的方式。</span><span class="sxs-lookup"><span data-stu-id="622a6-141">The deployment works the same way in each case.</span></span> <span data-ttu-id="622a6-142">如果你正在将部署到 Web 部署处理程序中的目标 web 服务器上，你应指定服务终结点，并且包括查询字符串参数作为 IIS 网站的名称 (例如， `https://STAGEWEB1:8172/MSDeploy.axd?site=DemoSite`)。</span><span class="sxs-lookup"><span data-stu-id="622a6-142">If you're deploying to the Web Deploy Handler on the destination web server, you should specify the service endpoint and include the name of the IIS website as a query string parameter (for example, `https://STAGEWEB1:8172/MSDeploy.axd?site=DemoSite`).</span></span> |
| <span data-ttu-id="622a6-143">**MSDeployAuth** Web 部署应使用对远程计算机进行身份验证的方法。</span><span class="sxs-lookup"><span data-stu-id="622a6-143">**MSDeployAuth** The method that Web Deploy should use to authenticate to the remote computer.</span></span> | <span data-ttu-id="622a6-144">此属性应设置为**NTLM**或**基本**。</span><span class="sxs-lookup"><span data-stu-id="622a6-144">This should be set to **NTLM** or **Basic**.</span></span> <span data-ttu-id="622a6-145">通常情况下，你将使用**NTLM**如果你正在部署到远程代理服务和**基本**如果你正在将它们部署到 Web 部署处理程序。</span><span class="sxs-lookup"><span data-stu-id="622a6-145">Typically, you'll use **NTLM** if you're deploying to the remote agent service and **Basic** if you're deploying to the Web Deploy Handler.</span></span> <span data-ttu-id="622a6-146">如果使用基本身份验证，你还需要指定的用户名和密码，IIS Web 部署工具 （Web 部署） 应模拟以执行部署。</span><span class="sxs-lookup"><span data-stu-id="622a6-146">If you use basic authentication, you also need to specify the user name and password that the IIS Web Deployment Tool (Web Deploy) should impersonate in order to perform the deployment.</span></span> <span data-ttu-id="622a6-147">在此示例中，这些值通过提供**MSDeployUsername**和**MSDeployPassword**属性。</span><span class="sxs-lookup"><span data-stu-id="622a6-147">In this example, these values are provided through the **MSDeployUsername** and **MSDeployPassword** properties.</span></span> <span data-ttu-id="622a6-148">如果使用 NTLM 身份验证，可以省略这些属性，或将其留空。</span><span class="sxs-lookup"><span data-stu-id="622a6-148">If you use NTLM authentication, you can omit these properties or leave them blank.</span></span> |
| <span data-ttu-id="622a6-149">**MSDeployUsername**如果使用基本身份验证时，Web 部署将使用此帐户在远程计算机上。</span><span class="sxs-lookup"><span data-stu-id="622a6-149">**MSDeployUsername** If you use basic authentication, Web Deploy will use this account on the remote computer.</span></span> | <span data-ttu-id="622a6-150">这应采用以下形式*域*\*用户名 * (例如， **FABRIKAM\matt**)。</span><span class="sxs-lookup"><span data-stu-id="622a6-150">This should take the form *DOMAIN*\*username* (for example, **FABRIKAM\matt**).</span></span> <span data-ttu-id="622a6-151">如果指定基本身份验证，仅使用此值。</span><span class="sxs-lookup"><span data-stu-id="622a6-151">This value is only used if you specify basic authentication.</span></span> <span data-ttu-id="622a6-152">如果使用 NTLM 身份验证，则可以省略该属性。</span><span class="sxs-lookup"><span data-stu-id="622a6-152">If you use NTLM authentication, the property can be omitted.</span></span> <span data-ttu-id="622a6-153">如果提供一个值，则它将被忽略。</span><span class="sxs-lookup"><span data-stu-id="622a6-153">If a value is supplied, it will be ignored.</span></span> |
| <span data-ttu-id="622a6-154">**MSDeployPassword**如果使用基本身份验证时，Web 部署将使用此密码在远程计算机上。</span><span class="sxs-lookup"><span data-stu-id="622a6-154">**MSDeployPassword** If you use basic authentication, Web Deploy will use this password on the remote computer.</span></span> | <span data-ttu-id="622a6-155">这是中指定的用户帐户的密码**MSDeployUsername**属性。</span><span class="sxs-lookup"><span data-stu-id="622a6-155">This is the password for the user account you specified in the **MSDeployUsername** property.</span></span> <span data-ttu-id="622a6-156">如果指定基本身份验证，仅使用此值。</span><span class="sxs-lookup"><span data-stu-id="622a6-156">This value is only used if you specify basic authentication.</span></span> <span data-ttu-id="622a6-157">如果使用 NTLM 身份验证，则可以省略该属性。</span><span class="sxs-lookup"><span data-stu-id="622a6-157">If you use NTLM authentication, the property can be omitted.</span></span> <span data-ttu-id="622a6-158">如果提供一个值，则它将被忽略。</span><span class="sxs-lookup"><span data-stu-id="622a6-158">If a value is supplied, it will be ignored.</span></span> |
| <span data-ttu-id="622a6-159">**ContactManagerIisPath**你想要部署联系人管理器 MVC 应用程序的 IIS 路径。</span><span class="sxs-lookup"><span data-stu-id="622a6-159">**ContactManagerIisPath** The IIS path on which you want to deploy the Contact Manager MVC application.</span></span> | <span data-ttu-id="622a6-160">这应为的路径，该窗体中出现在 IIS 管理器中，[*IIS 网站名称*] / [*web**应用程序名称*]。</span><span class="sxs-lookup"><span data-stu-id="622a6-160">This should be the path as it appears in IIS Manager, in the form [*IIS website name*]/[*web**application name*].</span></span> <span data-ttu-id="622a6-161">请记住，需要部署应用程序之前存在的 IIS 网站。</span><span class="sxs-lookup"><span data-stu-id="622a6-161">Remember that the IIS website needs to exist before you deploy your application.</span></span> <span data-ttu-id="622a6-162">例如，如果你已创建名为 DemoSite 的 IIS 网站，则可以作为 DemoSite/ContactManager 指定 MVC 应用程序的 IIS 路径。</span><span class="sxs-lookup"><span data-stu-id="622a6-162">For example, if you've created an IIS website named DemoSite, you could specify the IIS path for the MVC application as DemoSite/ContactManager.</span></span> |
| <span data-ttu-id="622a6-163">**ContactManagerServiceIisPath**你想要部署的联系人管理器 WCF 服务的 IIS 路径。</span><span class="sxs-lookup"><span data-stu-id="622a6-163">**ContactManagerServiceIisPath** The IIS path on which you want to deploy the Contact Manager WCF service.</span></span> | <span data-ttu-id="622a6-164">例如，如果你已创建名为 DemoSite 的 IIS 网站，则可以指定 WCF 服务的 IIS 路径**DemoSite/ContactManagerService**。</span><span class="sxs-lookup"><span data-stu-id="622a6-164">For example, if you've created an IIS website named DemoSite, you could specify the IIS path for the WCF service as **DemoSite/ContactManagerService**.</span></span> |
| <span data-ttu-id="622a6-165">**ContactManagerTargetUrl**可以从该处访问 WCF 服务的 URL。</span><span class="sxs-lookup"><span data-stu-id="622a6-165">**ContactManagerTargetUrl** The URL at which the WCF service can be reached.</span></span> | <span data-ttu-id="622a6-166">这将采用格式 [*IIS 网站根 URL*] / [*服务应用程序名称*] / [*服务终结点*]。</span><span class="sxs-lookup"><span data-stu-id="622a6-166">This will take the form [*IIS website root URL*]/[*service application name*]/[*service endpoint*].</span></span> <span data-ttu-id="622a6-167">例如，如果你已在端口 85 上创建 IIS 网站，URL 将采用以下形式`http://localhost:85/ContactManagerService/ContactService.svc`。</span><span class="sxs-lookup"><span data-stu-id="622a6-167">For example, if you've created an IIS website on port 85, the URL would take the form `http://localhost:85/ContactManagerService/ContactService.svc`.</span></span> <span data-ttu-id="622a6-168">请记住 MVC 应用程序和 WCF 服务部署到同一台服务器。</span><span class="sxs-lookup"><span data-stu-id="622a6-168">Remember that the MVC application and the WCF service are deployed to the same server.</span></span> <span data-ttu-id="622a6-169">因此，永远只有从安装它的计算机访问此 URL。</span><span class="sxs-lookup"><span data-stu-id="622a6-169">As a result, this URL is only ever accessed from the machine on which it's installed.</span></span> <span data-ttu-id="622a6-170">因此，它是在 URL 中使用 localhost 或 IP 地址，而不是计算机名称或主机标头，更好的做法。</span><span class="sxs-lookup"><span data-stu-id="622a6-170">Because of this, it's better to use localhost or the IP address, rather than the machine name or a host header, in the URL.</span></span> <span data-ttu-id="622a6-171">如果你使用的计算机名称或主机标头，[环回检查](https://go.microsoft.com/?linkid=9805131)在 IIS 中的安全功能可能阻止 URL 和返回**HTTP 401.1-未授权**错误。</span><span class="sxs-lookup"><span data-stu-id="622a6-171">If you use the machine name or a host header, the [loopback check](https://go.microsoft.com/?linkid=9805131) security feature in IIS may block the URL and return an **HTTP 401.1 - Unauthorized** error.</span></span> |
| <span data-ttu-id="622a6-172">**CmDatabaseConnectionString**数据库服务器的连接字符串。</span><span class="sxs-lookup"><span data-stu-id="622a6-172">**CmDatabaseConnectionString** The connection string for the database server.</span></span> | <span data-ttu-id="622a6-173">连接字符串将确定这两个 VSDBCMD 将用于联系数据库服务器和创建数据库和 web 服务器应用程序池将用于联系数据库服务器和与数据库交互的凭据的凭据。</span><span class="sxs-lookup"><span data-stu-id="622a6-173">The connection string determines both the credentials that VSDBCMD will use to contact the database server and create the database and the credentials that the web server application pool will use to contact the database server and interact with the database.</span></span> <span data-ttu-id="622a6-174">实质上是此处有两个选择。</span><span class="sxs-lookup"><span data-stu-id="622a6-174">Essentially you have two choices here.</span></span> <span data-ttu-id="622a6-175">可以指定**集成安全性 = true**，在这种情况下使用集成的 Windows 身份验证：**数据源 = TESTDB1; Integrated Security = true**在这种情况下，数据库将使用创建运行可执行文件、 VSDBCMD 的用户和应用程序的凭据将访问使用 web 服务器计算机帐户的标识的数据库。</span><span class="sxs-lookup"><span data-stu-id="622a6-175">You can specify **Integrated Security=true**, in which case integrated Windows authentication is used: **Data Source=TESTDB1;Integrated Security=true** In this case, the database will be created using the credentials of the user who runs the VSDBCMD executable, and the application will access the database using the identity of the web server machine account.</span></span> <span data-ttu-id="622a6-176">或者，你可以指定的用户名和密码的 SQL Server 帐户。</span><span class="sxs-lookup"><span data-stu-id="622a6-176">Alternatively, you can specify the user name and password of a SQL Server account.</span></span> <span data-ttu-id="622a6-177">同时 VSDBCMD 创建数据库以及要与数据库交互的应用程序池，在这种情况下，使用的 SQL Server 凭据：**数据源 = TESTDB1;用户 Id = ASqlUser;密码 = Pa$ $w0rd**本主题中的演练假定你将使用集成的 Windows 身份验证。</span><span class="sxs-lookup"><span data-stu-id="622a6-177">In this case, the SQL Server credentials are used both by VSDBCMD to create the database and by the application pool to interact with the database: **Data Source=TESTDB1;User Id=ASqlUser; Password=Pa$$w0rd** The walkthroughs in this topic assume that you'll use integrated Windows authentication.</span></span> |
| <span data-ttu-id="622a6-178">**CmTargetDatabase**想要允许你将在数据库服务器创建数据库的名称。</span><span class="sxs-lookup"><span data-stu-id="622a6-178">**CmTargetDatabase** The name you want to give the database you'll create on the database server.</span></span> | <span data-ttu-id="622a6-179">作为参数情况下，你在此处提供的值添加到 VSDBCMD 命令。</span><span class="sxs-lookup"><span data-stu-id="622a6-179">The value you provide here is added to the VSDBCMD command as a parameter.</span></span> <span data-ttu-id="622a6-180">此外可用于生成 web 服务器上的应用程序池可用于与数据库交互的完整连接字符串。</span><span class="sxs-lookup"><span data-stu-id="622a6-180">It's also used to build a full connection string that the application pool on the web server can use to interact with the database.</span></span> |
  

<span data-ttu-id="622a6-181">这些示例所示，你可以如何配置这些属性对于特定部署方案。</span><span class="sxs-lookup"><span data-stu-id="622a6-181">These examples show how you might configure these properties for specific deployment scenarios.</span></span>

### <a name="example-1x2014deployment-to-the-remote-agent-service"></a><span data-ttu-id="622a6-182">示例 1 & #x 2014年; 部署到的远程代理服务</span><span class="sxs-lookup"><span data-stu-id="622a6-182">Example 1&#x2014;Deployment to the Remote Agent Service</span></span>

<span data-ttu-id="622a6-183">在此示例中：</span><span class="sxs-lookup"><span data-stu-id="622a6-183">In this example:</span></span>

- <span data-ttu-id="622a6-184">要部署到 TESTWEB1 上的远程代理服务。</span><span class="sxs-lookup"><span data-stu-id="622a6-184">You're deploying to the remote agent service on TESTWEB1.</span></span>
- <span data-ttu-id="622a6-185">要指示 Web Deploy 以使用 NTLM 身份验证。</span><span class="sxs-lookup"><span data-stu-id="622a6-185">You're instructing Web Deploy to use NTLM authentication.</span></span> <span data-ttu-id="622a6-186">Web 部署将使用用于调用 Microsoft Build Engine (MSBuild) 的凭据运行。</span><span class="sxs-lookup"><span data-stu-id="622a6-186">Web Deploy will run using the credentials you used to invoke the Microsoft Build Engine (MSBuild).</span></span>
- <span data-ttu-id="622a6-187">你要使用集成身份验证部署**ContactManager** TESTDB1 到的数据库。</span><span class="sxs-lookup"><span data-stu-id="622a6-187">You're using integrated authentication to deploy the **ContactManager** database to TESTDB1.</span></span> <span data-ttu-id="622a6-188">数据库会使用用于调用 MSBuild 的凭据进行部署。</span><span class="sxs-lookup"><span data-stu-id="622a6-188">The database will be deployed using the credentials you used to invoke MSBuild.</span></span>


[!code-xml[Main](configuring-deployment-properties-for-a-target-environment/samples/sample1.xml)]


### <a name="example-2x2014deployment-to-the-web-deploy-handler-endpoint"></a><span data-ttu-id="622a6-189">示例 2 & #x 2014年; 部署到 Web 部署处理程序终结点</span><span class="sxs-lookup"><span data-stu-id="622a6-189">Example 2&#x2014;Deployment to the Web Deploy Handler Endpoint</span></span>

<span data-ttu-id="622a6-190">在此示例中：</span><span class="sxs-lookup"><span data-stu-id="622a6-190">In this example:</span></span>

- <span data-ttu-id="622a6-191">要部署到 STAGEWEB1 上的 Web 部署处理程序服务终结点。</span><span class="sxs-lookup"><span data-stu-id="622a6-191">You're deploying to the Web Deploy Handler service endpoint on STAGEWEB1.</span></span>
- <span data-ttu-id="622a6-192">要指示 Web Deploy 以使用基本身份验证。</span><span class="sxs-lookup"><span data-stu-id="622a6-192">You're instructing Web Deploy to use basic authentication.</span></span>
- <span data-ttu-id="622a6-193">你要指定 Web 部署应模拟的远程计算机上的 FABRIKAM\stagingdeployer 帐户。</span><span class="sxs-lookup"><span data-stu-id="622a6-193">You're specifying that Web Deploy should impersonate the FABRIKAM\stagingdeployer account on the remote computer.</span></span>
- <span data-ttu-id="622a6-194">您正在使用 SQL Server 身份验证来部署**ContactManager** STAGEDB1 到的数据库。</span><span class="sxs-lookup"><span data-stu-id="622a6-194">You're using SQL Server authentication to deploy the **ContactManager** database to STAGEDB1.</span></span>


[!code-xml[Main](configuring-deployment-properties-for-a-target-environment/samples/sample2.xml)]


## <a name="conclusion"></a><span data-ttu-id="622a6-195">结束语</span><span class="sxs-lookup"><span data-stu-id="622a6-195">Conclusion</span></span>

<span data-ttu-id="622a6-196">此时，你的项目文件得到完全配置以生成并部署到一个或多个目标环境的联系人管理器解决方案。</span><span class="sxs-lookup"><span data-stu-id="622a6-196">At this point, your project files are fully configured to build and deploy the Contact Manager solution to one or more destination environments.</span></span>

<span data-ttu-id="622a6-197">若要使用这些项目文件作为单步执行、 可重复部署过程的一部分，你需要执行*Publish.proj*文件使用 MSBuild，并在特定于环境的项目文件的位置作为参数传递。</span><span class="sxs-lookup"><span data-stu-id="622a6-197">To use these project files as part of a single-step, repeatable deployment process, you need to execute the *Publish.proj* file using MSBuild and pass in the location of the environment-specific project file as a parameter.</span></span> <span data-ttu-id="622a6-198">可以通过多种方式来执行此操作：</span><span class="sxs-lookup"><span data-stu-id="622a6-198">You can do this in various ways:</span></span>

- <span data-ttu-id="622a6-199">有关 MSBuild 和自定义项目文件的简介的概述，请参阅[了解项目文件](../web-deployment-in-the-enterprise/understanding-the-project-file.md)。</span><span class="sxs-lookup"><span data-stu-id="622a6-199">For an overview of MSBuild and an introduction to custom project files, see [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span></span>
- <span data-ttu-id="622a6-200">有关如何制定执行自定义项目文件的 MSBuild 命令的信息，请参阅[部署 Web 包](../web-deployment-in-the-enterprise/deploying-web-packages.md)。</span><span class="sxs-lookup"><span data-stu-id="622a6-200">For information on how to formulate an MSBuild command that executes your custom project files, see [Deploying Web Packages](../web-deployment-in-the-enterprise/deploying-web-packages.md).</span></span>
- <span data-ttu-id="622a6-201">有关如何将 MSBuild 命令合并到单步执行、 可重复部署的命令文件的信息，请参阅[创建并运行部署命令文件](../web-deployment-in-the-enterprise/creating-and-running-a-deployment-command-file.md)。</span><span class="sxs-lookup"><span data-stu-id="622a6-201">For information on how to incorporate your MSBuild commands into a command file for single-step, repeatable deployments, see [Creating and Running a Deployment Command File](../web-deployment-in-the-enterprise/creating-and-running-a-deployment-command-file.md).</span></span>
- <span data-ttu-id="622a6-202">有关如何从 Team Build 执行自定义项目文件的信息，请参阅[创建该支持部署的生成定义](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md)。</span><span class="sxs-lookup"><span data-stu-id="622a6-202">For information on how to execute your custom project files from Team Build, see [Creating a Build Definition that Supports Deployment](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md).</span></span>

>[!div class="step-by-step"]
[<span data-ttu-id="622a6-203">上一篇</span><span class="sxs-lookup"><span data-stu-id="622a6-203">Previous</span></span>](creating-a-server-farm-with-the-web-farm-framework.md)
