---
uid: web-forms/overview/data-access/basic-reporting/displaying-data-with-the-objectdatasource-cs
title: "显示与 ObjectDataSource (C#) 的数据 |Microsoft 文档"
author: rick-anderson
description: "本教程考察 ObjectDataSource 控件使用此控件，你可以将数据从以前的教程，而无需 havi 中创建 BLL 检索绑定..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 03/31/2010
ms.topic: article
ms.assetid: af882aef-56f5-4e9a-8f95-3977fde20e74
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/data-access/basic-reporting/displaying-data-with-the-objectdatasource-cs
msc.type: authoredcontent
ms.openlocfilehash: 8bd6534b652735e657aa71cdf07dac48f20a549c
ms.sourcegitcommit: 060879fcf3f73d2366b5c811986f8695fff65db8
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 01/24/2018
---
<a name="displaying-data-with-the-objectdatasource-c"></a><span data-ttu-id="2cf78-103">显示与 ObjectDataSource (C#) 的数据</span><span class="sxs-lookup"><span data-stu-id="2cf78-103">Displaying Data With the ObjectDataSource (C#)</span></span>
====================
<span data-ttu-id="2cf78-104">通过[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="2cf78-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="2cf78-105">[下载示例应用程序](http://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_4_CS.exe)或[下载 PDF](displaying-data-with-the-objectdatasource-cs/_static/datatutorial04cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="2cf78-105">[Download Sample App](http://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_4_CS.exe) or [Download PDF](displaying-data-with-the-objectdatasource-cs/_static/datatutorial04cs1.pdf)</span></span>

> <span data-ttu-id="2cf78-106">本教程可以使用此控件，你可以将数据从前面的教程中创建无需编写一行代码 BLL 检索绑定 ObjectDataSource 控件去 ！</span><span class="sxs-lookup"><span data-stu-id="2cf78-106">This tutorial looks at the ObjectDataSource control Using this control you can bind data retrieved from the BLL created in the previous tutorial without having to write a line of code!</span></span>


## <a name="introduction"></a><span data-ttu-id="2cf78-107">介绍</span><span class="sxs-lookup"><span data-stu-id="2cf78-107">Introduction</span></span>

<span data-ttu-id="2cf78-108">与我们的应用程序体系结构和网站页面布局完成，我们已准备好开始探索如何完成的各种常见数据和报表相关的任务。</span><span class="sxs-lookup"><span data-stu-id="2cf78-108">With our application architecture and website page layout complete, we're ready to start exploring how to accomplish a variety of common data- and reporting-related tasks.</span></span> <span data-ttu-id="2cf78-109">在前面的教程，我们已了解如何以编程方式将数据从 DAL 和 BLL 绑定到数据 ASP.NET 页中的 Web 控件。</span><span class="sxs-lookup"><span data-stu-id="2cf78-109">In the previous tutorials we've seen how to programmatically bind data from the DAL and BLL to a data Web control in an ASP.NET page.</span></span> <span data-ttu-id="2cf78-110">分配数据 Web 控件的此语法`DataSource`数据到显示，然后再调用控件的属性`DataBind()`方法已在 ASP.NET 1.x 应用程序，所使用的模式，并且可以继续在 2.0 应用程序中使用。</span><span class="sxs-lookup"><span data-stu-id="2cf78-110">This syntax assigning the data Web control's `DataSource` property to the data to display and then calling the control's `DataBind()` method was the pattern used in ASP.NET 1.x applications, and can continue to be used in your 2.0 applications.</span></span> <span data-ttu-id="2cf78-111">但是，ASP.NET 2.0 的新数据源控件提供以声明性方式处理数据。</span><span class="sxs-lookup"><span data-stu-id="2cf78-111">However, ASP.NET 2.0's new data source controls offer a declarative way to work with data.</span></span> <span data-ttu-id="2cf78-112">使用这些控件你可以将数据从 BLL 检索的绑定在中创建[以前一教程](../introduction/creating-a-business-logic-layer-cs.md)而无需编写一行代码 ！</span><span class="sxs-lookup"><span data-stu-id="2cf78-112">Using these controls you can bind data retrieved from the BLL created in the [previous tutorial](../introduction/creating-a-business-logic-layer-cs.md) without having to write a line of code!</span></span>

<span data-ttu-id="2cf78-113">ASP.NET 2.0 附带有五个内置的数据源控件[SqlDataSource](https://msdn.microsoft.com/library/dz12d98w(vs.80).aspx)， [AccessDataSource](https://msdn.microsoft.com/library/8e5545e1.aspx)， [ObjectDataSource](https://msdn.microsoft.com/library/9a4kyhcx.aspx)， [XmlDataSource](https://msdn.microsoft.com/library/e8d8587a(en-US,VS.80).aspx)，和[SiteMapDataSource](https://msdn.microsoft.com/library/5ex9t96x(en-US,VS.80).aspx)尽管可以创建你自己[自定义数据源控件](https://msdn.microsoft.com/library/default.asp?url=/library/dnvs05/html/DataSourceCon1.asp)在需要时。</span><span class="sxs-lookup"><span data-stu-id="2cf78-113">ASP.NET 2.0 ships with five built-in data source controls [SqlDataSource](https://msdn.microsoft.com/library/dz12d98w(vs.80).aspx), [AccessDataSource](https://msdn.microsoft.com/library/8e5545e1.aspx), [ObjectDataSource](https://msdn.microsoft.com/library/9a4kyhcx.aspx), [XmlDataSource](https://msdn.microsoft.com/library/e8d8587a(en-US,VS.80).aspx), and [SiteMapDataSource](https://msdn.microsoft.com/library/5ex9t96x(en-US,VS.80).aspx) although you can build your own [custom data source controls](https://msdn.microsoft.com/library/default.asp?url=/library/dnvs05/html/DataSourceCon1.asp), if needed.</span></span> <span data-ttu-id="2cf78-114">由于我们已为我们的教程应用程序开发一种体系结构，我们将使用 ObjectDataSource 针对我们 BLL 类。</span><span class="sxs-lookup"><span data-stu-id="2cf78-114">Since we have developed an architecture for our tutorial application, we'll be using the ObjectDataSource against our BLL classes.</span></span>


![ASP.NET 2.0 包含五个内置的数据源控件](displaying-data-with-the-objectdatasource-cs/_static/image1.png)

<span data-ttu-id="2cf78-116">**图 1**: ASP.NET 2.0 包含五个内置的数据源控件</span><span class="sxs-lookup"><span data-stu-id="2cf78-116">**Figure 1**: ASP.NET 2.0 Includes Five Built-In Data Source Controls</span></span>


<span data-ttu-id="2cf78-117">ObjectDataSource 用作代理使用一些其他对象。</span><span class="sxs-lookup"><span data-stu-id="2cf78-117">The ObjectDataSource serves as a proxy for working with some other object.</span></span> <span data-ttu-id="2cf78-118">若要配置 ObjectDataSource 我们指定这基础对象和其方法如何映射到 ObjectDataSource `Select`， `Insert`， `Update`，和`Delete`方法。</span><span class="sxs-lookup"><span data-stu-id="2cf78-118">To configure the ObjectDataSource we specify this underlying object and how its methods map to the ObjectDataSource's `Select`, `Insert`, `Update`, and `Delete` methods.</span></span> <span data-ttu-id="2cf78-119">后尚未指定此基础对象，其方法映射到对象数据源的我们然后可以将对象数据源绑定到数据 Web 控件。</span><span class="sxs-lookup"><span data-stu-id="2cf78-119">Once this underlying object has been specified and its methods mapped to the ObjectDataSource's, we can then bind the ObjectDataSource to a data Web control.</span></span> <span data-ttu-id="2cf78-120">ASP.NET 附带有很多数据 Web 控件，包括 GridView、 说明、 说明如何和的 DropDownList，等等。</span><span class="sxs-lookup"><span data-stu-id="2cf78-120">ASP.NET ships with many data Web controls, including the GridView, DetailsView, RadioButtonList, and DropDownList, among others.</span></span> <span data-ttu-id="2cf78-121">在页面生命周期，Web 控件的数据可能需要访问的数据绑定到了，它将通过调用其 ObjectDataSource 完成`Select`方法; 如果数据 Web 控件支持插入、 更新或删除，调用可能会对其ObjectDataSource 的`Insert`， `Update`，或`Delete`方法。</span><span class="sxs-lookup"><span data-stu-id="2cf78-121">During the page lifecycle, the data Web control may need to access the data it's bound to, which it will accomplish by invoking its ObjectDataSource's `Select` method; if the data Web control supports inserting, updating, or deleting, calls may be made to its ObjectDataSource's `Insert`, `Update`, or `Delete` methods.</span></span> <span data-ttu-id="2cf78-122">这些调用然后路由到适当的基础对象的方法 ObjectDataSource 通过中，如下面的关系图所示。</span><span class="sxs-lookup"><span data-stu-id="2cf78-122">These calls are then routed by the ObjectDataSource to the appropriate underlying object's methods as the following diagram illustrates.</span></span>


<span data-ttu-id="2cf78-123">[![ObjectDataSource 充当的代理](displaying-data-with-the-objectdatasource-cs/_static/image3.png)](displaying-data-with-the-objectdatasource-cs/_static/image2.png)</span><span class="sxs-lookup"><span data-stu-id="2cf78-123">[![The ObjectDataSource Serves as a Proxy](displaying-data-with-the-objectdatasource-cs/_static/image3.png)](displaying-data-with-the-objectdatasource-cs/_static/image2.png)</span></span>

<span data-ttu-id="2cf78-124">**图 2**: ObjectDataSource 用作代理的 ([单击以查看实际尺寸的图像](displaying-data-with-the-objectdatasource-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="2cf78-124">**Figure 2**: The ObjectDataSource Serves as a Proxy ([Click to view full-size image](displaying-data-with-the-objectdatasource-cs/_static/image4.png))</span></span>


<span data-ttu-id="2cf78-125">尽管可以使用对象数据源来调用用于插入方法，更新，或删除数据，让我们只需专注于返回的数据;将来的教程将探讨使用对象数据源和数据修改数据的 Web 控件。</span><span class="sxs-lookup"><span data-stu-id="2cf78-125">While the ObjectDataSource can be used to invoke methods for inserting, updating, or deleting data, let's just focus on returning data; future tutorials will explore using the ObjectDataSource and data Web controls that modify data.</span></span>

## <a name="step-1-adding-and-configuring-the-objectdatasource-control"></a><span data-ttu-id="2cf78-126">步骤 1： 添加和配置 ObjectDataSource 控件</span><span class="sxs-lookup"><span data-stu-id="2cf78-126">Step 1: Adding and Configuring the ObjectDataSource Control</span></span>

<span data-ttu-id="2cf78-127">首先打开`SimpleDisplay.aspx`页面`BasicReporting`文件夹中，切换到设计视图中，并从工具箱拖到页面的设计图面将 ObjectDataSource 控件。</span><span class="sxs-lookup"><span data-stu-id="2cf78-127">Start by opening the `SimpleDisplay.aspx` page in the `BasicReporting` folder, switch to Design view, and then drag an ObjectDataSource control from the Toolbox onto the page's design surface.</span></span> <span data-ttu-id="2cf78-128">ObjectDataSource 将显示为灰色的框，在设计图面上，因为它不会生成任何标记;通过调用一种方法从指定的对象，它只需访问数据。</span><span class="sxs-lookup"><span data-stu-id="2cf78-128">The ObjectDataSource appears as a gray box on the design surface because it does not produce any markup; it simply accesses data by invoking a method from a specified object.</span></span> <span data-ttu-id="2cf78-129">返回对象数据源的数据可以显示由数据 Web 控件，如 GridView、 说明、 FormView，依次类推。</span><span class="sxs-lookup"><span data-stu-id="2cf78-129">The data returned by an ObjectDataSource can be displayed by a data Web control, such as the GridView, DetailsView, FormView, and so on.</span></span>

> [!NOTE]
> <span data-ttu-id="2cf78-130">或者，你可能会首先向页面添加 Web 控件的数据，然后，从其智能标记上，选择&lt;新数据源&gt;从下拉列表的选项。</span><span class="sxs-lookup"><span data-stu-id="2cf78-130">Alternatively, you may first add the data Web control to the page and then, from its smart tag, choose the &lt;New data source&gt; option from the drop-down list.</span></span>


<span data-ttu-id="2cf78-131">若要指定对象数据源的基础对象和该对象的方法映射到对象数据源的方式，请单击从 ObjectDataSource 的智能标记的配置数据源链接。</span><span class="sxs-lookup"><span data-stu-id="2cf78-131">To specify the ObjectDataSource's underlying object and how that object's methods map to the ObjectDataSource's, click on the Configure Data Source link from the ObjectDataSource's smart tag.</span></span>


<span data-ttu-id="2cf78-132">[![单击配置中的智能标记的数据源链接](displaying-data-with-the-objectdatasource-cs/_static/image6.png)](displaying-data-with-the-objectdatasource-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="2cf78-132">[![Click the Configure Data Source Link from the Smart Tag](displaying-data-with-the-objectdatasource-cs/_static/image6.png)](displaying-data-with-the-objectdatasource-cs/_static/image5.png)</span></span>

<span data-ttu-id="2cf78-133">**图 3**： 单击智能标记中的配置数据源链接 ([单击以查看实际尺寸的图像](displaying-data-with-the-objectdatasource-cs/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="2cf78-133">**Figure 3**: Click the Configure Data Source Link from the Smart Tag ([Click to view full-size image](displaying-data-with-the-objectdatasource-cs/_static/image7.png))</span></span>


<span data-ttu-id="2cf78-134">这会打开配置数据源向导。</span><span class="sxs-lookup"><span data-stu-id="2cf78-134">This brings up the Configure Data Source wizard.</span></span> <span data-ttu-id="2cf78-135">首先，我们必须指定要使用对象数据源的对象。</span><span class="sxs-lookup"><span data-stu-id="2cf78-135">First, we must specify the object the ObjectDataSource is to work with.</span></span> <span data-ttu-id="2cf78-136">如果"显示仅数据组件"复选框后，此屏幕上的下拉列表将列出已修饰的那些对象`DataObject`属性。</span><span class="sxs-lookup"><span data-stu-id="2cf78-136">If the "Show only data components" checkbox is checked, the drop-down list on this screen lists only those objects that have been decorated with the `DataObject` attribute.</span></span> <span data-ttu-id="2cf78-137">目前我们的列表在类型化数据集和我们在前面的教程中创建 BLL 类中包括 Tableadapter。</span><span class="sxs-lookup"><span data-stu-id="2cf78-137">Currently our list includes the TableAdapters in the Typed DataSet and the BLL classes we created in the previous tutorial.</span></span> <span data-ttu-id="2cf78-138">如果你忘记添加`DataObject`属性到的业务逻辑层类你看不到他们此列表中。</span><span class="sxs-lookup"><span data-stu-id="2cf78-138">If you forgot to add the `DataObject` attribute to the Business Logic Layer classes you won't see them in this list.</span></span> <span data-ttu-id="2cf78-139">在这种情况下，取消选中"显示仅数据组件"复选框以查看所有对象，其中应包括 BLL 类 （以及类型化数据集数据表、 Datarow，等中的其他类）。</span><span class="sxs-lookup"><span data-stu-id="2cf78-139">In that case, uncheck the "Show only data components" checkbox to view all objects, which should include the BLL classes (along with the other classes in the Typed DataSet the DataTables, DataRows, and so on).</span></span>

<span data-ttu-id="2cf78-140">在此第一个屏幕中选择`ProductsBLL`类从下拉列表并单击下一步。</span><span class="sxs-lookup"><span data-stu-id="2cf78-140">From this first screen choose the `ProductsBLL` class from the drop-down list and click Next.</span></span>


<span data-ttu-id="2cf78-141">[![通过 ObjectDataSource 控件指定使用对象](displaying-data-with-the-objectdatasource-cs/_static/image9.png)](displaying-data-with-the-objectdatasource-cs/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="2cf78-141">[![Specify the Object to Use with the ObjectDataSource Control](displaying-data-with-the-objectdatasource-cs/_static/image9.png)](displaying-data-with-the-objectdatasource-cs/_static/image8.png)</span></span>

<span data-ttu-id="2cf78-142">**图 4**： 通过 ObjectDataSource 控件指定使用对象 ([单击以查看实际尺寸的图像](displaying-data-with-the-objectdatasource-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="2cf78-142">**Figure 4**: Specify the Object to Use with the ObjectDataSource Control ([Click to view full-size image](displaying-data-with-the-objectdatasource-cs/_static/image10.png))</span></span>


<span data-ttu-id="2cf78-143">该向导的下一个屏幕会提示你选择哪种 ObjectDataSource 应调用的方法。</span><span class="sxs-lookup"><span data-stu-id="2cf78-143">The next screen in the wizard prompts you to select what method the ObjectDataSource should invoke.</span></span> <span data-ttu-id="2cf78-144">下拉列表将列出在从上一屏幕中选择的对象中返回数据的那些方法。</span><span class="sxs-lookup"><span data-stu-id="2cf78-144">The drop-down lists those methods that return data in the object selected from the previous screen.</span></span> <span data-ttu-id="2cf78-145">在这里我们看到`GetProductByProductID`， `GetProducts`， `GetProductsByCategoryID`，和`GetProductsBySupplierID`。</span><span class="sxs-lookup"><span data-stu-id="2cf78-145">Here we see `GetProductByProductID`, `GetProducts`, `GetProductsByCategoryID`, and `GetProductsBySupplierID`.</span></span> <span data-ttu-id="2cf78-146">选择`GetProducts`方法从该下拉列表并单击完成 (如果你添加`DataObjectMethodAttribute`到`ProductBLL`的前面的教程中，此选项中所示的方法将选择默认情况下)。</span><span class="sxs-lookup"><span data-stu-id="2cf78-146">Select the `GetProducts` method from the drop-down list and click Finish (if you added the `DataObjectMethodAttribute` to the `ProductBLL`'s methods as shown in the previous tutorial, this option will be selected by default).</span></span>


<span data-ttu-id="2cf78-147">[![选择将数据还原从选择的选项卡上的方法](displaying-data-with-the-objectdatasource-cs/_static/image12.png)](displaying-data-with-the-objectdatasource-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="2cf78-147">[![Choose the Method for Returning Data from the SELECT Tab](displaying-data-with-the-objectdatasource-cs/_static/image12.png)](displaying-data-with-the-objectdatasource-cs/_static/image11.png)</span></span>

<span data-ttu-id="2cf78-148">**图 5**： 返回的数据选择的方法，从选择选项卡 ([单击以查看实际尺寸的图像](displaying-data-with-the-objectdatasource-cs/_static/image13.png))</span><span class="sxs-lookup"><span data-stu-id="2cf78-148">**Figure 5**: Choose the Method for Returning Data from the SELECT Tab ([Click to view full-size image](displaying-data-with-the-objectdatasource-cs/_static/image13.png))</span></span>


## <a name="configure-the-objectdatasource-manually"></a><span data-ttu-id="2cf78-149">手动配置对象数据源</span><span class="sxs-lookup"><span data-stu-id="2cf78-149">Configure the ObjectDataSource Manually</span></span>

<span data-ttu-id="2cf78-150">对象数据源的配置数据源向导提供了一个快速方法来指定它使用的对象并将关联对象的哪些方法调用。</span><span class="sxs-lookup"><span data-stu-id="2cf78-150">The ObjectDataSource's Configure Data Source wizard offers a quick way to specify the object it uses and to associate what methods of the object are invoked.</span></span> <span data-ttu-id="2cf78-151">但是，可以配置其属性，通过属性窗口或直接在声明性的标记中通过对象数据源。</span><span class="sxs-lookup"><span data-stu-id="2cf78-151">You can, however, configure the ObjectDataSource through its properties, either through the Properties window or directly in the declarative markup.</span></span> <span data-ttu-id="2cf78-152">只需设置`TypeName`为要使用的基础对象的类型的属性和`SelectMethod`到要在检索数据时调用的方法。</span><span class="sxs-lookup"><span data-stu-id="2cf78-152">Simply set the `TypeName` property to the type of the underlying object to be used, and the `SelectMethod` to the method to invoke when retrieving data.</span></span>


[!code-aspx[Main](displaying-data-with-the-objectdatasource-cs/samples/sample1.aspx)]

<span data-ttu-id="2cf78-153">即使你希望配置数据源向导可能有些时候当你需要手动配置对象数据源，因为此向导只列出开发人员创建的类。</span><span class="sxs-lookup"><span data-stu-id="2cf78-153">Even if you prefer the Configure Data Source wizard there may be times when you need to manually configure the ObjectDataSource, as the wizard only lists developer-created classes.</span></span> <span data-ttu-id="2cf78-154">如果你想要将对象数据源绑定到.NET Framework 中的类如[成员资格类](https://msdn.microsoft.com/library/system.web.security.membership.aspx)、 访问用户帐户信息或[Directory 类](https://msdn.microsoft.com/library/system.io.directory.aspx)要使用文件系统信息你将需要手动设置对象数据源的属性。</span><span class="sxs-lookup"><span data-stu-id="2cf78-154">If you want to bind the ObjectDataSource to a class in the .NET Framework such as the [Membership class](https://msdn.microsoft.com/library/system.web.security.membership.aspx), to access user account information, or the [Directory class](https://msdn.microsoft.com/library/system.io.directory.aspx) to work with file system information you'll need to manually set the ObjectDataSource's properties.</span></span>

## <a name="step-2-adding-a-data-web-control-and-binding-it-to-the-objectdatasource"></a><span data-ttu-id="2cf78-155">步骤 2： 添加数据 Web 控件，并将其绑定到 ObjectDataSource</span><span class="sxs-lookup"><span data-stu-id="2cf78-155">Step 2: Adding a Data Web Control and Binding it to the ObjectDataSource</span></span>

<span data-ttu-id="2cf78-156">添加到页面并配置对象数据源后，我们已准备好将数据 Web 控件添加到页后，可以显示所返回的对象数据源的数据`Select`方法。</span><span class="sxs-lookup"><span data-stu-id="2cf78-156">Once the ObjectDataSource has been added to the page and configured, we're ready to add data Web controls to the page to display the data returned by the ObjectDataSource's `Select` method.</span></span> <span data-ttu-id="2cf78-157">Web 控件的任何数据可以绑定到 ObjectDataSource;让我们看一下在 GridView、 说明如何和 FormView 中显示对象数据源的数据。</span><span class="sxs-lookup"><span data-stu-id="2cf78-157">Any data Web control can be bound to an ObjectDataSource; let's look at displaying the ObjectDataSource's data in a GridView, DetailsView, and FormView.</span></span>

## <a name="binding-a-gridview-to-the-objectdatasource"></a><span data-ttu-id="2cf78-158">绑定到对象数据源的 GridView</span><span class="sxs-lookup"><span data-stu-id="2cf78-158">Binding a GridView to the ObjectDataSource</span></span>

<span data-ttu-id="2cf78-159">从工具箱拖到添加 GridView 控件`SimpleDisplay.aspx`的设计图面。</span><span class="sxs-lookup"><span data-stu-id="2cf78-159">Add a GridView control from the Toolbox to `SimpleDisplay.aspx`'s design surface.</span></span> <span data-ttu-id="2cf78-160">从 GridView 的智能标记，选择我们在步骤 1 中增加 ObjectDataSource 控件。</span><span class="sxs-lookup"><span data-stu-id="2cf78-160">From the GridView's smart tag, choose the ObjectDataSource control we added in Step 1.</span></span> <span data-ttu-id="2cf78-161">这将自动在每个属性返回的数据从 ObjectDataSource 的 GridView 中创建 BoundField`Select`方法 （即，由产品 DataTable 定义的属性）。</span><span class="sxs-lookup"><span data-stu-id="2cf78-161">This will automatically create a BoundField in the GridView for each property returned by the data from the ObjectDataSource's `Select` method (namely, the properties defined by the Products DataTable).</span></span>


<span data-ttu-id="2cf78-162">[![GridView 已添加到页面并将其绑定到 ObjectDataSource](displaying-data-with-the-objectdatasource-cs/_static/image15.png)](displaying-data-with-the-objectdatasource-cs/_static/image14.png)</span><span class="sxs-lookup"><span data-stu-id="2cf78-162">[![A GridView Has Been Added to the Page and Bound to the ObjectDataSource](displaying-data-with-the-objectdatasource-cs/_static/image15.png)](displaying-data-with-the-objectdatasource-cs/_static/image14.png)</span></span>

<span data-ttu-id="2cf78-163">**图 6**: GridView 已添加到页上，然后绑定到 ObjectDataSource ([单击以查看实际尺寸的图像](displaying-data-with-the-objectdatasource-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="2cf78-163">**Figure 6**: A GridView Has Been Added to the Page and Bound to the ObjectDataSource ([Click to view full-size image](displaying-data-with-the-objectdatasource-cs/_static/image16.png))</span></span>


<span data-ttu-id="2cf78-164">然后可以自定义、 重新排列，或通过单击智能标记中的编辑列选项移除 GridView BoundFields。</span><span class="sxs-lookup"><span data-stu-id="2cf78-164">You can then customize, rearrange, or remove the GridView's BoundFields by clicking the Edit Columns option from the smart tag.</span></span>


<span data-ttu-id="2cf78-165">[![管理通过编辑列对话框中的 GridView BoundFields](displaying-data-with-the-objectdatasource-cs/_static/image18.png)](displaying-data-with-the-objectdatasource-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="2cf78-165">[![Manage the GridView's BoundFields Through the Edit Columns Dialog Box](displaying-data-with-the-objectdatasource-cs/_static/image18.png)](displaying-data-with-the-objectdatasource-cs/_static/image17.png)</span></span>

<span data-ttu-id="2cf78-166">**图 7**： 管理 GridView BoundFields 通过编辑列对话框 ([单击以查看实际尺寸的图像](displaying-data-with-the-objectdatasource-cs/_static/image19.png))</span><span class="sxs-lookup"><span data-stu-id="2cf78-166">**Figure 7**: Manage the GridView's BoundFields Through the Edit Columns Dialog Box ([Click to view full-size image](displaying-data-with-the-objectdatasource-cs/_static/image19.png))</span></span>


<span data-ttu-id="2cf78-167">花一些时间来修改 GridView BoundFields，删除`ProductID`， `SupplierID`， `CategoryID`， `QuantityPerUnit`， `UnitsInStock`， `UnitsOnOrder`，和`ReorderLevel`BoundFields。</span><span class="sxs-lookup"><span data-stu-id="2cf78-167">Take a moment to modify the GridView's BoundFields, removing the `ProductID`, `SupplierID`, `CategoryID`, `QuantityPerUnit`, `UnitsInStock`, `UnitsOnOrder`, and `ReorderLevel` BoundFields.</span></span> <span data-ttu-id="2cf78-168">只需从列表中左下角选择 BoundField，然后单击删除按钮 (红色的 X) 可将其删除。</span><span class="sxs-lookup"><span data-stu-id="2cf78-168">Simply select the BoundField from the list in the bottom left and click the delete button (the red X) to remove them.</span></span> <span data-ttu-id="2cf78-169">接下来，重新排列 BoundFields 以便`CategoryName`和`SupplierName`BoundFields 之前`UnitPrice`BoundField 通过选择这些 BoundFields 并单击向上箭头。</span><span class="sxs-lookup"><span data-stu-id="2cf78-169">Next, Rearrange the BoundFields so that the `CategoryName` and `SupplierName` BoundFields precede the `UnitPrice` BoundField by selecting these BoundFields and clicking the up arrow.</span></span> <span data-ttu-id="2cf78-170">设置`HeaderText`属性到剩余 BoundFields `Products`， `Category`， `Supplier`，和`Price`分别。</span><span class="sxs-lookup"><span data-stu-id="2cf78-170">Set the `HeaderText` properties of the remaining BoundFields to `Products`, `Category`, `Supplier`, and `Price`, respectively.</span></span> <span data-ttu-id="2cf78-171">接下来，让`Price`BoundField 通过设置 BoundField 的情况下的格式设为货币`HtmlEncode`属性设置为 False 并将其`DataFormatString`属性`{0:c}`。</span><span class="sxs-lookup"><span data-stu-id="2cf78-171">Next, have the `Price` BoundField formatted as a currency by setting the BoundField's `HtmlEncode` property to False and its `DataFormatString` property to `{0:c}`.</span></span> <span data-ttu-id="2cf78-172">最后，水平对齐`Price`向右和`Discontinued`通过中心中的复选框`ItemStyle` / `HorizontalAlign`属性。</span><span class="sxs-lookup"><span data-stu-id="2cf78-172">Finally, horizontally align the `Price` to the right and the `Discontinued` checkbox in the center via the `ItemStyle`/`HorizontalAlign` property.</span></span>


[!code-aspx[Main](displaying-data-with-the-objectdatasource-cs/samples/sample2.aspx)]


<span data-ttu-id="2cf78-173">[![GridView BoundFields 已自定义](displaying-data-with-the-objectdatasource-cs/_static/image21.png)](displaying-data-with-the-objectdatasource-cs/_static/image20.png)</span><span class="sxs-lookup"><span data-stu-id="2cf78-173">[![The GridView's BoundFields Have Been Customized](displaying-data-with-the-objectdatasource-cs/_static/image21.png)](displaying-data-with-the-objectdatasource-cs/_static/image20.png)</span></span>

<span data-ttu-id="2cf78-174">**图 8**: GridView BoundFields 已自定义 ([单击以查看实际尺寸的图像](displaying-data-with-the-objectdatasource-cs/_static/image22.png))</span><span class="sxs-lookup"><span data-stu-id="2cf78-174">**Figure 8**: The GridView's BoundFields Have Been Customized ([Click to view full-size image](displaying-data-with-the-objectdatasource-cs/_static/image22.png))</span></span>


## <a name="using-themes-for-a-consistent-look"></a><span data-ttu-id="2cf78-175">使用一致的外观的主题</span><span class="sxs-lookup"><span data-stu-id="2cf78-175">Using Themes for a Consistent Look</span></span>

<span data-ttu-id="2cf78-176">这些教程致力于删除任何控件级别样式设置，而不使用级联样式表定义尽可能与外部文件中。</span><span class="sxs-lookup"><span data-stu-id="2cf78-176">These tutorials strive to remove any control-level style settings, instead using cascading style sheets defined in an external file whenever possible.</span></span> <span data-ttu-id="2cf78-177">`Styles.css`文件包含`DataWebControlStyle`， `HeaderStyle`， `RowStyle`，和`AlternatingRowStyle`应该用于规定数据的外观的 CSS 类 Web 这些教程中使用的控件。</span><span class="sxs-lookup"><span data-stu-id="2cf78-177">The `Styles.css` file contains `DataWebControlStyle`, `HeaderStyle`, `RowStyle`, and `AlternatingRowStyle` CSS classes that should be used to dictate the appearance of the data Web controls used in these tutorials.</span></span> <span data-ttu-id="2cf78-178">若要实现此目的，我们无法设置 GridView`CssClass`属性`DataWebControlStyle`，并将其`HeaderStyle`， `RowStyle`，和`AlternatingRowStyle`属性的`CssClass`属性相应地。</span><span class="sxs-lookup"><span data-stu-id="2cf78-178">To accomplish this, we could set the GridView's `CssClass` property to `DataWebControlStyle`, and its `HeaderStyle`, `RowStyle`, and `AlternatingRowStyle` properties' `CssClass` properties accordingly.</span></span>

<span data-ttu-id="2cf78-179">如果我们将这些`CssClass`Web 控件，我们将需要显式设置的每个数据这些属性值，请务必在属性 Web 控件添加到我们的教程。</span><span class="sxs-lookup"><span data-stu-id="2cf78-179">If we set these `CssClass` properties at the Web control we'd need to remember to explicitly set these property values for each and every data Web control added to our tutorials.</span></span> <span data-ttu-id="2cf78-180">更易于管理的方法是为 GridView，说明如何，定义的默认 CSS 相关的属性和 FormView 控件使用的主题。</span><span class="sxs-lookup"><span data-stu-id="2cf78-180">A more manageable approach is to define the default CSS-related properties for the GridView, DetailsView, and FormView controls using a Theme.</span></span> <span data-ttu-id="2cf78-181">主题是控件级别的属性设置、 图像、 和到页可以应用跨站点来强制执行常见的外观和感觉的 CSS 类的集合。</span><span class="sxs-lookup"><span data-stu-id="2cf78-181">A Theme is a collection of control-level property settings, images, and CSS classes that can be applied to pages across a site to enforce a common look and feel.</span></span>

<span data-ttu-id="2cf78-182">我们主题不包含任何图像或 CSS 文件 (我们将其保留样式表`Styles.css`作为-在 web 应用程序的根文件夹中，定义)，但会包括两个外观。</span><span class="sxs-lookup"><span data-stu-id="2cf78-182">Our Theme won't include any images or CSS files (we'll leave the stylesheet `Styles.css` as-is, defined in the root folder of the web application), but will include two Skins.</span></span> <span data-ttu-id="2cf78-183">外观是定义 Web 控件的默认属性的文件。</span><span class="sxs-lookup"><span data-stu-id="2cf78-183">A Skin is a file that defines the default properties for a Web control.</span></span> <span data-ttu-id="2cf78-184">具体而言，我们将已外观为文件 GridView 和说明控件中，默认值，该值指示`CssClass`-与相关的属性。</span><span class="sxs-lookup"><span data-stu-id="2cf78-184">Specifically, we'll have a Skin file for the GridView and DetailsView controls, indicating the default `CssClass`-related properties.</span></span>

<span data-ttu-id="2cf78-185">通过将新的外观文件添加到名为的项目启动`GridView.skin`通过右键单击解决方案资源管理器中的项目名称并选择添加新项。</span><span class="sxs-lookup"><span data-stu-id="2cf78-185">Start by adding a new Skin File to your project named `GridView.skin` by right-clicking on the project name in the Solution Explorer and choosing Add New Item.</span></span>


<span data-ttu-id="2cf78-186">[![添加一个名为 GridView.skin 的外观文件](displaying-data-with-the-objectdatasource-cs/_static/image24.png)](displaying-data-with-the-objectdatasource-cs/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="2cf78-186">[![Add a Skin File Named GridView.skin](displaying-data-with-the-objectdatasource-cs/_static/image24.png)](displaying-data-with-the-objectdatasource-cs/_static/image23.png)</span></span>

<span data-ttu-id="2cf78-187">**图 9**： 添加外观文件命名为`GridView.skin`([单击以查看实际尺寸的图像](displaying-data-with-the-objectdatasource-cs/_static/image25.png))</span><span class="sxs-lookup"><span data-stu-id="2cf78-187">**Figure 9**: Add a Skin File Named `GridView.skin` ([Click to view full-size image](displaying-data-with-the-objectdatasource-cs/_static/image25.png))</span></span>


<span data-ttu-id="2cf78-188">外观文件需要放置在一个主题，其中位于`App_Themes`文件夹。</span><span class="sxs-lookup"><span data-stu-id="2cf78-188">Skin files need to be placed in a Theme, which are located in the `App_Themes` folder.</span></span> <span data-ttu-id="2cf78-189">我们还没有这样的文件夹，因为 Visual Studio 中将请先将其提供为创建一个我们添加我们的第一个外观时。</span><span class="sxs-lookup"><span data-stu-id="2cf78-189">Since we don't yet have such a folder, Visual Studio will kindly offer to create one for us when adding our first Skin.</span></span> <span data-ttu-id="2cf78-190">单击是以创建`App_Theme`文件夹并将新`GridView.skin`文件存在。</span><span class="sxs-lookup"><span data-stu-id="2cf78-190">Click Yes to create the `App_Theme` folder and place the new `GridView.skin` file there.</span></span>


<span data-ttu-id="2cf78-191">[![让 Visual Studio 创建 App_Theme 文件夹](displaying-data-with-the-objectdatasource-cs/_static/image27.png)](displaying-data-with-the-objectdatasource-cs/_static/image26.png)</span><span class="sxs-lookup"><span data-stu-id="2cf78-191">[![Let Visual Studio Create the App_Theme Folder](displaying-data-with-the-objectdatasource-cs/_static/image27.png)](displaying-data-with-the-objectdatasource-cs/_static/image26.png)</span></span>

<span data-ttu-id="2cf78-192">**图 10**： 让 Visual Studio 创建`App_Theme`文件夹 ([单击以查看实际尺寸的图像](displaying-data-with-the-objectdatasource-cs/_static/image28.png))</span><span class="sxs-lookup"><span data-stu-id="2cf78-192">**Figure 10**: Let Visual Studio Create the `App_Theme` Folder ([Click to view full-size image](displaying-data-with-the-objectdatasource-cs/_static/image28.png))</span></span>


<span data-ttu-id="2cf78-193">这将创建新主题中的`App_Themes`文件夹以外观文件命名 GridView `GridView.skin`。</span><span class="sxs-lookup"><span data-stu-id="2cf78-193">This will create a new Theme in the `App_Themes` folder named GridView with the Skin file `GridView.skin`.</span></span>


![GridView 主题都有已添加到 App_Theme 文件夹](displaying-data-with-the-objectdatasource-cs/_static/image29.png)

<span data-ttu-id="2cf78-195">**图 11**: GridView 主题都有已添加到`App_Theme`文件夹</span><span class="sxs-lookup"><span data-stu-id="2cf78-195">**Figure 11**: The GridView Theme has Been Added to the `App_Theme` Folder</span></span>


<span data-ttu-id="2cf78-196">将 GridView 主题重命名为 DataWebControls (右键单击 GridView 文件夹`App_Theme`文件夹，然后选择重命名)。</span><span class="sxs-lookup"><span data-stu-id="2cf78-196">Rename the GridView Theme to DataWebControls (right-click on the GridView folder in the `App_Theme` folder and choose Rename).</span></span> <span data-ttu-id="2cf78-197">接下来，输入以下标记到`GridView.skin`文件：</span><span class="sxs-lookup"><span data-stu-id="2cf78-197">Next, enter the following markup into the `GridView.skin` file:</span></span>


[!code-aspx[Main](displaying-data-with-the-objectdatasource-cs/samples/sample3.aspx)]

<span data-ttu-id="2cf78-198">这将定义的默认属性`CssClass`-与属性相关的任何页中使用 DataWebControls 主题中的任何 GridView。</span><span class="sxs-lookup"><span data-stu-id="2cf78-198">This defines the default properties for the `CssClass`-related properties for any GridView in any page that uses the DataWebControls Theme.</span></span> <span data-ttu-id="2cf78-199">有关说明，我们将很快使用的 Web 控件的数据，让我们添加另一个的外观。</span><span class="sxs-lookup"><span data-stu-id="2cf78-199">Let's add another Skin for the DetailsView, a data Web control that we'll be using shortly.</span></span> <span data-ttu-id="2cf78-200">添加到名为 DataWebControls 主题的新外观`DetailsView.skin`并添加以下标记：</span><span class="sxs-lookup"><span data-stu-id="2cf78-200">Add a new Skin to the DataWebControls Theme named `DetailsView.skin` and add the following markup:</span></span>


[!code-aspx[Main](displaying-data-with-the-objectdatasource-cs/samples/sample4.aspx)]

<span data-ttu-id="2cf78-201">与我们定义的主题，最后一步是将主题应用到我们 ASP.NET 页。</span><span class="sxs-lookup"><span data-stu-id="2cf78-201">With our Theme defined, the last step is to apply the Theme to our ASP.NET page.</span></span> <span data-ttu-id="2cf78-202">可以将主题应用基于按页或在网站中的所有页面。</span><span class="sxs-lookup"><span data-stu-id="2cf78-202">A Theme can be applied on a page-by-page basis or for all pages in a website.</span></span> <span data-ttu-id="2cf78-203">让我们在网站中的所有页中都使用此主题。</span><span class="sxs-lookup"><span data-stu-id="2cf78-203">Let's use this theme for all pages in the website.</span></span> <span data-ttu-id="2cf78-204">若要完成此操作，将添加到以下标记`Web.config`的`<system.web>`部分：</span><span class="sxs-lookup"><span data-stu-id="2cf78-204">To accomplish this, add the following markup to `Web.config`'s `<system.web>` section:</span></span>


[!code-xml[Main](displaying-data-with-the-objectdatasource-cs/samples/sample5.xml)]

<span data-ttu-id="2cf78-205">这就是所有到它 ！</span><span class="sxs-lookup"><span data-stu-id="2cf78-205">That's all there is to it!</span></span> <span data-ttu-id="2cf78-206">`styleSheetTheme`设置指示主题中指定的属性应*不*重写控件级别指定的属性。</span><span class="sxs-lookup"><span data-stu-id="2cf78-206">The `styleSheetTheme` setting indicates that the properties specified in the Theme should *not* override the properties specified at the control level.</span></span> <span data-ttu-id="2cf78-207">若要指定主题设置应能带来控制设置，使用`theme`属性代替了`styleSheetTheme`; 遗憾的是，通过指定的主题设置`theme`属性不显示在 Visual Studio 设计视图。</span><span class="sxs-lookup"><span data-stu-id="2cf78-207">To specify that Theme settings should trump control settings, use the `theme` attribute in place of `styleSheetTheme`; unfortunately, Theme settings specified via the `theme` attribute do not appear in the Visual Studio Design view.</span></span> <span data-ttu-id="2cf78-208">请参阅[ASP.NET 主题和皮肤概述](https://msdn.microsoft.com/library/ykzx33wh.aspx)和[服务器端样式使用主题](https://quickstarts.asp.net/quickstartv20/aspnet/doc/themes/stylesheettheme.aspx)主题和皮肤; 的详细信息请参阅[How To： 应用 ASP.NET 主题](https://msdn.microsoft.com/library/0yy5hxdk(VS.80).aspx)有关的详细信息配置页后，可以使用主题。</span><span class="sxs-lookup"><span data-stu-id="2cf78-208">Refer to [ASP.NET Themes and Skins Overview](https://msdn.microsoft.com/library/ykzx33wh.aspx) and [Server-Side Styles Using Themes](https://quickstarts.asp.net/quickstartv20/aspnet/doc/themes/stylesheettheme.aspx) for more information on Themes and Skins; see [How To: Apply ASP.NET Themes](https://msdn.microsoft.com/library/0yy5hxdk(VS.80).aspx) for more on configuring a page to use a theme.</span></span>


<span data-ttu-id="2cf78-209">[![GridView 显示产品的名称、 类别、 供应商、 价格和停用的信息](displaying-data-with-the-objectdatasource-cs/_static/image31.png)](displaying-data-with-the-objectdatasource-cs/_static/image30.png)</span><span class="sxs-lookup"><span data-stu-id="2cf78-209">[![The GridView Displays the Product's Name, Category, Supplier, Price, and Discontinued Information](displaying-data-with-the-objectdatasource-cs/_static/image31.png)](displaying-data-with-the-objectdatasource-cs/_static/image30.png)</span></span>

<span data-ttu-id="2cf78-210">**图 12**: GridView 显示产品的名称、 类别、 供应商、 价格和停用信息 ([单击以查看实际尺寸的图像](displaying-data-with-the-objectdatasource-cs/_static/image32.png))</span><span class="sxs-lookup"><span data-stu-id="2cf78-210">**Figure 12**: The GridView Displays the Product's Name, Category, Supplier, Price, and Discontinued Information ([Click to view full-size image](displaying-data-with-the-objectdatasource-cs/_static/image32.png))</span></span>


## <a name="displaying-one-record-at-a-time-in-the-detailsview"></a><span data-ttu-id="2cf78-211">在说明中一次显示一条记录</span><span class="sxs-lookup"><span data-stu-id="2cf78-211">Displaying One Record at a Time in the DetailsView</span></span>

<span data-ttu-id="2cf78-212">GridView 显示个返回的数据源控件绑定到每个记录都占一行。</span><span class="sxs-lookup"><span data-stu-id="2cf78-212">The GridView displays one row for each record returned by the data source control to which it's bound.</span></span> <span data-ttu-id="2cf78-213">有的时候，但是，我们可能想要一次显示唯一记录或仅一条记录。</span><span class="sxs-lookup"><span data-stu-id="2cf78-213">There are times, however, when we may want to display a sole record or just one record at a time.</span></span> <span data-ttu-id="2cf78-214">[说明](https://msdn.microsoft.com/library/s3w1w7t4.aspx)提供此功能，从而呈现为 HTML`<table>`与两个列和每个列或属性绑定到控件的一个行。</span><span class="sxs-lookup"><span data-stu-id="2cf78-214">The [DetailsView control](https://msdn.microsoft.com/library/s3w1w7t4.aspx) offers this functionality, rendering as an HTML `<table>` with two columns and one row for each column or property bound to the control.</span></span> <span data-ttu-id="2cf78-215">可以将说明如何视为与单个记录的旋转 90 度 GridView。</span><span class="sxs-lookup"><span data-stu-id="2cf78-215">You can think of the DetailsView as a GridView with a single record rotated 90 degrees.</span></span>

<span data-ttu-id="2cf78-216">首先，通过添加说明如何控制*上面*中的 GridView `SimpleDisplay.aspx`。</span><span class="sxs-lookup"><span data-stu-id="2cf78-216">Start by adding a DetailsView control *above* the GridView in `SimpleDisplay.aspx`.</span></span> <span data-ttu-id="2cf78-217">接下来，将其绑定到 GridView 作为相同 ObjectDataSource 控件。</span><span class="sxs-lookup"><span data-stu-id="2cf78-217">Next, bind it to the same ObjectDataSource control as the GridView.</span></span> <span data-ttu-id="2cf78-218">如与 GridView，BoundField 将添加到对象数据源返回的对象中每个属性说明`Select`方法。</span><span class="sxs-lookup"><span data-stu-id="2cf78-218">Like with the GridView, a BoundField will be added to the DetailsView for each property in the object returned by the ObjectDataSource's `Select` method.</span></span> <span data-ttu-id="2cf78-219">唯一的区别是水平而不是垂直说明的 BoundFields 的布局方式。</span><span class="sxs-lookup"><span data-stu-id="2cf78-219">The only difference is that the DetailsView's BoundFields are laid out horizontally rather than vertically.</span></span>


<span data-ttu-id="2cf78-220">[![向页面添加说明并将其绑定到 ObjectDataSource](displaying-data-with-the-objectdatasource-cs/_static/image34.png)](displaying-data-with-the-objectdatasource-cs/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="2cf78-220">[![Add a DetailsView to the Page and Bind it to the ObjectDataSource](displaying-data-with-the-objectdatasource-cs/_static/image34.png)](displaying-data-with-the-objectdatasource-cs/_static/image33.png)</span></span>

<span data-ttu-id="2cf78-221">**图 13**： 向页面添加说明并将其绑定到 ObjectDataSource ([单击以查看实际尺寸的图像](displaying-data-with-the-objectdatasource-cs/_static/image35.png))</span><span class="sxs-lookup"><span data-stu-id="2cf78-221">**Figure 13**: Add a DetailsView to the Page and Bind it to the ObjectDataSource ([Click to view full-size image](displaying-data-with-the-objectdatasource-cs/_static/image35.png))</span></span>


<span data-ttu-id="2cf78-222">GridView，如说明的 BoundFields 可以进行修改，以提供更多自定义的显示的对象数据源返回的数据。</span><span class="sxs-lookup"><span data-stu-id="2cf78-222">Like the GridView, the DetailsView's BoundFields can be tweaked to provide a more customized display of the data returned by the ObjectDataSource.</span></span> <span data-ttu-id="2cf78-223">图 14 显示说明后其 BoundFields 和`CssClass`已配置属性以使其外观类似于 GridView 示例。</span><span class="sxs-lookup"><span data-stu-id="2cf78-223">Figure 14 shows the DetailsView after its BoundFields and `CssClass` properties have been configured to make its appearance similar to the GridView example.</span></span>


<span data-ttu-id="2cf78-224">[![说明如何显示单个记录](displaying-data-with-the-objectdatasource-cs/_static/image37.png)](displaying-data-with-the-objectdatasource-cs/_static/image36.png)</span><span class="sxs-lookup"><span data-stu-id="2cf78-224">[![The DetailsView Shows a Single Record](displaying-data-with-the-objectdatasource-cs/_static/image37.png)](displaying-data-with-the-objectdatasource-cs/_static/image36.png)</span></span>

<span data-ttu-id="2cf78-225">**图 14**: 说明如何显示单个记录 ([单击以查看实际尺寸的图像](displaying-data-with-the-objectdatasource-cs/_static/image38.png))</span><span class="sxs-lookup"><span data-stu-id="2cf78-225">**Figure 14**: The DetailsView Shows a Single Record ([Click to view full-size image](displaying-data-with-the-objectdatasource-cs/_static/image38.png))</span></span>


<span data-ttu-id="2cf78-226">请注意，说明如何仅显示其数据源返回的第一个记录。</span><span class="sxs-lookup"><span data-stu-id="2cf78-226">Note that the DetailsView only displays the first record returned by its data source.</span></span> <span data-ttu-id="2cf78-227">若要允许用户来单步执行的所有记录，一次一个地我们必须启用分页功能的说明。</span><span class="sxs-lookup"><span data-stu-id="2cf78-227">To allow the user to step through all of the records, one at a time, we must enable paging for the DetailsView.</span></span> <span data-ttu-id="2cf78-228">为此，请返回到 Visual Studio，并检查中说明的智能标记的启用分页复选框。</span><span class="sxs-lookup"><span data-stu-id="2cf78-228">To do so, return to Visual Studio and check the Enable Paging checkbox in the DetailsView's smart tag.</span></span>


<span data-ttu-id="2cf78-229">[![在说明中启用分页](displaying-data-with-the-objectdatasource-cs/_static/image40.png)](displaying-data-with-the-objectdatasource-cs/_static/image39.png)</span><span class="sxs-lookup"><span data-stu-id="2cf78-229">[![Enable Paging in the DetailsView Control](displaying-data-with-the-objectdatasource-cs/_static/image40.png)](displaying-data-with-the-objectdatasource-cs/_static/image39.png)</span></span>

<span data-ttu-id="2cf78-230">**图 15**： 在说明中启用分页 ([单击以查看实际尺寸的图像](displaying-data-with-the-objectdatasource-cs/_static/image41.png))</span><span class="sxs-lookup"><span data-stu-id="2cf78-230">**Figure 15**: Enable Paging in the DetailsView Control ([Click to view full-size image](displaying-data-with-the-objectdatasource-cs/_static/image41.png))</span></span>


<span data-ttu-id="2cf78-231">[![说明如何使用启用了分页，允许用户查看的任何产品](displaying-data-with-the-objectdatasource-cs/_static/image43.png)](displaying-data-with-the-objectdatasource-cs/_static/image42.png)</span><span class="sxs-lookup"><span data-stu-id="2cf78-231">[![With Paging Enabled, the DetailsView Allows the User to View Any of the Products](displaying-data-with-the-objectdatasource-cs/_static/image43.png)](displaying-data-with-the-objectdatasource-cs/_static/image42.png)</span></span>

<span data-ttu-id="2cf78-232">**图 16**: 说明如何使用分页已启用，允许用户查看的任何产品 ([单击以查看实际尺寸的图像](displaying-data-with-the-objectdatasource-cs/_static/image44.png))</span><span class="sxs-lookup"><span data-stu-id="2cf78-232">**Figure 16**: With Paging Enabled, the DetailsView Allows the User to View Any of the Products ([Click to view full-size image](displaying-data-with-the-objectdatasource-cs/_static/image44.png))</span></span>


<span data-ttu-id="2cf78-233">我们将讨论有关分页在将来的教程的详细信息。</span><span class="sxs-lookup"><span data-stu-id="2cf78-233">We'll talk more about paging in future tutorials.</span></span>

## <a name="a-more-flexible-layout-for-showing-one-record-at-a-time"></a><span data-ttu-id="2cf78-234">一次显示一条记录更灵活的布局</span><span class="sxs-lookup"><span data-stu-id="2cf78-234">A More Flexible Layout for Showing One Record at a Time</span></span>

<span data-ttu-id="2cf78-235">说明如何是非常刚性中从 ObjectDataSource 返回每个记录中的显示方式。</span><span class="sxs-lookup"><span data-stu-id="2cf78-235">The DetailsView is pretty rigid in how it displays each record returned from the ObjectDataSource.</span></span> <span data-ttu-id="2cf78-236">我们可能想更灵活的数据视图。</span><span class="sxs-lookup"><span data-stu-id="2cf78-236">We may want a more flexible view of the data.</span></span> <span data-ttu-id="2cf78-237">例如，而不是在单独的一行上显示产品的名称、 类别、 供应商、 价格和停用的信息，我们可能想要显示的产品名称并以定价`<h4>`标题下，显示的类别和供应商信息下面的名称和较小的字体大小的价格。</span><span class="sxs-lookup"><span data-stu-id="2cf78-237">For example, rather than showing the product's name, category, supplier, price, and discontinued information each on a separate row, we may want to show the product name and price in an `<h4>` heading, with the category and supplier information appearing below the name and price in a smaller font size.</span></span> <span data-ttu-id="2cf78-238">我们可能不满足要显示的值旁边的属性名称 （产品、 类别和等等）。</span><span class="sxs-lookup"><span data-stu-id="2cf78-238">And we may not care to show the property names (Product, Category, and so on) next to the values.</span></span>

<span data-ttu-id="2cf78-239">[FormView 控件](https://msdn.microsoft.com/library/fyf1dk77.aspx)提供此级别的自定义项。</span><span class="sxs-lookup"><span data-stu-id="2cf78-239">The [FormView control](https://msdn.microsoft.com/library/fyf1dk77.aspx) provides this level of customization.</span></span> <span data-ttu-id="2cf78-240">FormView 而不是使用字段 （如的 GridView 和说明如何执行操作），使用允许的 Web 控件，静态 HTML 混合的模板和[数据绑定语法](http://www.15seconds.com/issue/040630.htm)。</span><span class="sxs-lookup"><span data-stu-id="2cf78-240">Rather than using fields (like the GridView and DetailsView do), the FormView uses templates, which allow for a mix of Web controls, static HTML, and [databinding syntax](http://www.15seconds.com/issue/040630.htm).</span></span> <span data-ttu-id="2cf78-241">如果你熟悉中继器控件从 ASP.NET 1.x，你可以将 FormView 视为显示单个记录转发器。</span><span class="sxs-lookup"><span data-stu-id="2cf78-241">If you are familiar with the Repeater control from ASP.NET 1.x, you can think of the FormView as the Repeater for showing a single record.</span></span>

<span data-ttu-id="2cf78-242">FormView 将控件添加到`SimpleDisplay.aspx`页的设计图面。</span><span class="sxs-lookup"><span data-stu-id="2cf78-242">Add a FormView control to the `SimpleDisplay.aspx` page's design surface.</span></span> <span data-ttu-id="2cf78-243">最初 FormView 将显示为灰色块，通知我们，我们需要至少情况下，提供控件的`ItemTemplate`。</span><span class="sxs-lookup"><span data-stu-id="2cf78-243">Initially the FormView displays as a gray block, informing us that we need to provide, at minimum, the control's `ItemTemplate`.</span></span>


<span data-ttu-id="2cf78-244">[![FormView 必须包括 ItemTemplate](displaying-data-with-the-objectdatasource-cs/_static/image46.png)](displaying-data-with-the-objectdatasource-cs/_static/image45.png)</span><span class="sxs-lookup"><span data-stu-id="2cf78-244">[![The FormView Must Include an ItemTemplate](displaying-data-with-the-objectdatasource-cs/_static/image46.png)](displaying-data-with-the-objectdatasource-cs/_static/image45.png)</span></span>

<span data-ttu-id="2cf78-245">**图 17**: FormView 必须包括`ItemTemplate`([单击以查看实际尺寸的图像](displaying-data-with-the-objectdatasource-cs/_static/image47.png))</span><span class="sxs-lookup"><span data-stu-id="2cf78-245">**Figure 17**: The FormView Must Include an `ItemTemplate` ([Click to view full-size image](displaying-data-with-the-objectdatasource-cs/_static/image47.png))</span></span>


<span data-ttu-id="2cf78-246">可以对通过 FormView 的智能标记，将创建的默认数据源控件直接绑定 FormView`ItemTemplate`自动 (连同`EditItemTemplate`和`InsertItemTemplate`，如果 ObjectDatatSource 控件的`InsertMethod`和`UpdateMethod`设置属性)。</span><span class="sxs-lookup"><span data-stu-id="2cf78-246">You can bind the FormView directly to a data source control through the FormView's smart tag, which will create a default `ItemTemplate` automatically (along with an `EditItemTemplate` and `InsertItemTemplate`, if the ObjectDatatSource control's `InsertMethod` and `UpdateMethod` properties are set).</span></span> <span data-ttu-id="2cf78-247">但是，对于此示例中我们将数据绑定到 FormView 并指定其`ItemTemplate`手动。</span><span class="sxs-lookup"><span data-stu-id="2cf78-247">However, for this example let's bind the data to the FormView and specify its `ItemTemplate` manually.</span></span> <span data-ttu-id="2cf78-248">通过设置 FormView 启动`DataSourceID`属性`ID`的 ObjectDataSource 控件， `ObjectDataSource1`。</span><span class="sxs-lookup"><span data-stu-id="2cf78-248">Start by setting the FormView's `DataSourceID` property to the `ID` of the ObjectDataSource control, `ObjectDataSource1`.</span></span> <span data-ttu-id="2cf78-249">接下来，创建`ItemTemplate`，使其显示产品的名称和价格中的`<h4>`元素和类别和发货方中的名称下的较小的字体大小。</span><span class="sxs-lookup"><span data-stu-id="2cf78-249">Next, create the `ItemTemplate` so that it displays the product's name and price in an `<h4>` element and the category and shipper names beneath that in a smaller font size.</span></span>


[!code-aspx[Main](displaying-data-with-the-objectdatasource-cs/samples/sample6.aspx)]


<span data-ttu-id="2cf78-250">[![首次产品 （牛奶） 显示在自定义格式](displaying-data-with-the-objectdatasource-cs/_static/image49.png)](displaying-data-with-the-objectdatasource-cs/_static/image48.png)</span><span class="sxs-lookup"><span data-stu-id="2cf78-250">[![The First Product (Chai) is Displayed in a Custom Format](displaying-data-with-the-objectdatasource-cs/_static/image49.png)](displaying-data-with-the-objectdatasource-cs/_static/image48.png)</span></span>

<span data-ttu-id="2cf78-251">**图 18**: 首次产品 （牛奶） 显示在自定义格式 ([单击以查看实际尺寸的图像](displaying-data-with-the-objectdatasource-cs/_static/image50.png))</span><span class="sxs-lookup"><span data-stu-id="2cf78-251">**Figure 18**: The First Product (Chai) is Displayed in a Custom Format ([Click to view full-size image](displaying-data-with-the-objectdatasource-cs/_static/image50.png))</span></span>


<span data-ttu-id="2cf78-252">`<%# Eval(propertyName) %>`是数据绑定的语法。</span><span class="sxs-lookup"><span data-stu-id="2cf78-252">The `<%# Eval(propertyName) %>` is the databinding syntax.</span></span> <span data-ttu-id="2cf78-253">`Eval`方法返回绑定到 FormView 控件的当前对象的指定属性的值。</span><span class="sxs-lookup"><span data-stu-id="2cf78-253">The `Eval` method returns the value of the specified property for the current object being bound to the FormView control.</span></span> <span data-ttu-id="2cf78-254">请参阅 Alex 荷马的文章[简体和扩展数据绑定中的语法 ASP.NET 2.0](http://www.15seconds.com/issue/040630.htm)有关数据绑定的详细信息细节。</span><span class="sxs-lookup"><span data-stu-id="2cf78-254">Check out Alex Homer's article [Simplified and Extended Data Binding Syntax in ASP.NET 2.0](http://www.15seconds.com/issue/040630.htm) for more information on the ins and outs of databinding.</span></span>

<span data-ttu-id="2cf78-255">说明如何，如 FormView 只显示从 ObjectDataSource 返回第一条记录。</span><span class="sxs-lookup"><span data-stu-id="2cf78-255">Like the DetailsView, the FormView only shows the first record returned from the ObjectDataSource.</span></span> <span data-ttu-id="2cf78-256">你可以在中启用分页 FormView，允许访问者遍历一次一个的产品。</span><span class="sxs-lookup"><span data-stu-id="2cf78-256">You can enable paging in the FormView to allow visitors to step through the products one at a time.</span></span>

## <a name="summary"></a><span data-ttu-id="2cf78-257">摘要</span><span class="sxs-lookup"><span data-stu-id="2cf78-257">Summary</span></span>

<span data-ttu-id="2cf78-258">而无需编写一行代码感谢 ASP.NET 2.0 ObjectDataSource 控件，可以实现访问，以及如何显示从业务逻辑层的数据。</span><span class="sxs-lookup"><span data-stu-id="2cf78-258">Accessing and displaying data from a Business Logic Layer can be accomplished without writing a line of code thanks to ASP.NET 2.0's ObjectDataSource control.</span></span> <span data-ttu-id="2cf78-259">ObjectDataSource 调用指定的方法的类，并返回结果。</span><span class="sxs-lookup"><span data-stu-id="2cf78-259">The ObjectDataSource invokes a specified method of a class and returns the results.</span></span> <span data-ttu-id="2cf78-260">这些结果可以显示在数据绑定到对象数据源的 Web 控件。</span><span class="sxs-lookup"><span data-stu-id="2cf78-260">These results can be displayed in a data Web control that's bound to the ObjectDataSource.</span></span> <span data-ttu-id="2cf78-261">在本教程中我们将讨论在将 GridView、 说明如何和 FormView 控件绑定到对象数据源。</span><span class="sxs-lookup"><span data-stu-id="2cf78-261">In this tutorial we looked at binding the GridView, DetailsView, and FormView controls to the ObjectDataSource.</span></span>

<span data-ttu-id="2cf78-262">到目前为止我们仅已了解如何使用对象数据源来调用的参数的方法，但如果我们想要调用的方法，要求输入参数，如`ProductBLL`类的`GetProductsByCategoryID(categoryID)`？</span><span class="sxs-lookup"><span data-stu-id="2cf78-262">So far we've only seen how to use the ObjectDataSource to invoke a parameter-less method, but what if we want to invoke a method that expects input parameters, such as the `ProductBLL` class's `GetProductsByCategoryID(categoryID)`?</span></span> <span data-ttu-id="2cf78-263">为了调用方法，要求一个或多个参数，我们必须配置对象数据源指定这些参数的值。</span><span class="sxs-lookup"><span data-stu-id="2cf78-263">In order to call a method that expects one or more parameters we must configure the ObjectDataSource to specify the values for these parameters.</span></span> <span data-ttu-id="2cf78-264">我们将了解如何完成此中我们[下一教程](declarative-parameters-cs.md)。</span><span class="sxs-lookup"><span data-stu-id="2cf78-264">We'll see how to accomplish this in our [next tutorial](declarative-parameters-cs.md).</span></span>

<span data-ttu-id="2cf78-265">尽情享受编程 ！</span><span class="sxs-lookup"><span data-stu-id="2cf78-265">Happy Programming!</span></span>

## <a name="further-reading"></a><span data-ttu-id="2cf78-266">其他阅读材料</span><span class="sxs-lookup"><span data-stu-id="2cf78-266">Further Reading</span></span>

<span data-ttu-id="2cf78-267">在本教程中讨论的主题的详细信息，请参阅以下资源：</span><span class="sxs-lookup"><span data-stu-id="2cf78-267">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="2cf78-268">创建你自己的数据源控件</span><span class="sxs-lookup"><span data-stu-id="2cf78-268">Create Your Own Data Source Controls</span></span>](https://msdn.microsoft.com/library/ms364049.aspx)
- [<span data-ttu-id="2cf78-269">ASP.NET 2.0 的 GridView 示例</span><span class="sxs-lookup"><span data-stu-id="2cf78-269">GridView Examples for ASP.NET 2.0</span></span>](https://msdn.microsoft.com/library/aa479339.aspx)
- [<span data-ttu-id="2cf78-270">简化和扩展数据绑定 ASP.NET 2.0 中的语法</span><span class="sxs-lookup"><span data-stu-id="2cf78-270">Simplified and Extended Data Binding Syntax in ASP.NET 2.0</span></span>](http://www.15seconds.com/issue/040630.htm)
- [<span data-ttu-id="2cf78-271">在 ASP.NET 2.0 中的主题</span><span class="sxs-lookup"><span data-stu-id="2cf78-271">Themes in ASP.NET 2.0</span></span>](http://www.odetocode.com/Articles/423.aspx)
- [<span data-ttu-id="2cf78-272">使用主题的服务器端样式</span><span class="sxs-lookup"><span data-stu-id="2cf78-272">Server-Side Styles Using Themes</span></span>](https://quickstarts.asp.net/quickstartv20/aspnet/doc/themes/stylesheettheme.aspx)
- [<span data-ttu-id="2cf78-273">如何： 以编程方式应用 ASP.NET 主题</span><span class="sxs-lookup"><span data-stu-id="2cf78-273">How To: Apply ASP.NET Themes Programmatically</span></span>](https://msdn.microsoft.com/library/tx35bd89.aspx)

## <a name="about-the-author"></a><span data-ttu-id="2cf78-274">关于作者</span><span class="sxs-lookup"><span data-stu-id="2cf78-274">About the Author</span></span>

<span data-ttu-id="2cf78-275">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml)，作者的七个 ASP/ASP.NET 书籍和的创始人[4GuysFromRolla.com](http://www.4guysfromrolla.com)，自 1998 年使用与 Microsoft Web 技术。</span><span class="sxs-lookup"><span data-stu-id="2cf78-275">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="2cf78-276">Scott 的作用是作为独立的顾问、 培训师和编写器。</span><span class="sxs-lookup"><span data-stu-id="2cf78-276">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="2cf78-277">最新书籍是[ *Sam 教授自己 ASP.NET 2.0 24 小时内*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)。</span><span class="sxs-lookup"><span data-stu-id="2cf78-277">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="2cf78-278">他可以达到在[ mitchell@4GuysFromRolla.com。](mailto:mitchell@4GuysFromRolla.com)或通过他的博客，其中可以找到在[http://ScottOnWriting.NET](http://ScottOnWriting.NET)。</span><span class="sxs-lookup"><span data-stu-id="2cf78-278">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="2cf78-279">特别感谢</span><span class="sxs-lookup"><span data-stu-id="2cf78-279">Special Thanks To</span></span>

<span data-ttu-id="2cf78-280">本教程系列已由许多有用的审阅者评审。</span><span class="sxs-lookup"><span data-stu-id="2cf78-280">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="2cf78-281">本教程中的前导审阅者已希尔顿 Giesenow。</span><span class="sxs-lookup"><span data-stu-id="2cf78-281">Lead reviewer for this tutorial was Hilton Giesenow.</span></span> <span data-ttu-id="2cf78-282">对感兴趣查看我即将到来的 MSDN 文章？</span><span class="sxs-lookup"><span data-stu-id="2cf78-282">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="2cf78-283">如果是这样，删除我一行[ mitchell@4GuysFromRolla.com。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="2cf78-283">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

>[!div class="step-by-step"]
[<span data-ttu-id="2cf78-284">下一篇</span><span class="sxs-lookup"><span data-stu-id="2cf78-284">Next</span></span>](declarative-parameters-cs.md)
