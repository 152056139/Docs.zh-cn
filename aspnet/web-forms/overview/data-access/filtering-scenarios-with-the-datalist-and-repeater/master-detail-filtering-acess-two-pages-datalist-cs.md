---
uid: web-forms/overview/data-access/filtering-scenarios-with-the-datalist-and-repeater/master-detail-filtering-acess-two-pages-datalist-cs
title: 跨两个页 (C#) 筛选主/详细信息 |Microsoft 文档
author: rick-anderson
description: 在本教程中我们了解如何在两个页上分隔母版/详细信息报告。 在 'master' 页我们使用重复器控件来呈现的 categ 列表...
ms.author: aspnetcontent
manager: wpickett
ms.date: 10/30/2010
ms.topic: article
ms.assetid: 68b8c023-92fa-4df6-9563-1764e16e4b04
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/data-access/filtering-scenarios-with-the-datalist-and-repeater/master-detail-filtering-acess-two-pages-datalist-cs
msc.type: authoredcontent
ms.openlocfilehash: 6a3783175218438f2a9f735c3861c56e039a248e
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/06/2018
ms.locfileid: "30887091"
---
<a name="masterdetail-filtering-across-two-pages-c"></a><span data-ttu-id="4eabc-104">大纲/细节筛选跨两个页 (C#)</span><span class="sxs-lookup"><span data-stu-id="4eabc-104">Master/Detail Filtering Across Two Pages (C#)</span></span>
====================
<span data-ttu-id="4eabc-105">通过[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="4eabc-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="4eabc-106">[下载示例应用程序](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_34_CS.exe)或[下载 PDF](master-detail-filtering-acess-two-pages-datalist-cs/_static/datatutorial34cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="4eabc-106">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_34_CS.exe) or [Download PDF](master-detail-filtering-acess-two-pages-datalist-cs/_static/datatutorial34cs1.pdf)</span></span>

> <span data-ttu-id="4eabc-107">在本教程中我们了解如何在两个页上分隔母版/详细信息报告。</span><span class="sxs-lookup"><span data-stu-id="4eabc-107">In this tutorial we look at how to separate a master/detail report across two pages.</span></span> <span data-ttu-id="4eabc-108">在"母版页"我们可以使用重复器控件来呈现类别的列表，当单击，会使用户进入"详细信息"页其中两个列 DataList 显示属于所选类别这些产品。</span><span class="sxs-lookup"><span data-stu-id="4eabc-108">In the "master" page we use a Repeater control to render a list of categories that, when clicked, will take the user to the "details" page where a two-column DataList shows those products belonging to the selected category.</span></span>


## <a name="introduction"></a><span data-ttu-id="4eabc-109">介绍</span><span class="sxs-lookup"><span data-stu-id="4eabc-109">Introduction</span></span>

<span data-ttu-id="4eabc-110">在[前面教程](master-detail-filtering-with-a-dropdownlist-datalist-cs.md)我们已了解如何在使用 DropDownLists 以显示"主"的记录和显示的"详细信息。"DataList 单个 web 页中显示主/详细信息报表</span><span class="sxs-lookup"><span data-stu-id="4eabc-110">In the [preceding tutorial](master-detail-filtering-with-a-dropdownlist-datalist-cs.md) we saw how to display master/detail reports in a single web page using DropDownLists to display the "master" records and a DataList to display the "details."</span></span> <span data-ttu-id="4eabc-111">用于主/详细信息报表的另一种常见模式是具有一个网页上的主记录和在另一台的详细信息。</span><span class="sxs-lookup"><span data-stu-id="4eabc-111">Another common pattern used for master/detail reports is to have the master records on one web page and the details on another.</span></span> <span data-ttu-id="4eabc-112">在早期版本[主/详细信息筛选跨两个页](../masterdetail/master-detail-filtering-across-two-pages-cs.md)教程中，我们将检查此模式使用一个 GridView 显示系统中所有供应商。</span><span class="sxs-lookup"><span data-stu-id="4eabc-112">In the earlier [Master/Detail Filtering Across Two Pages](../masterdetail/master-detail-filtering-across-two-pages-cs.md) tutorial, we examined this pattern using a GridView to display all of the suppliers in the system.</span></span> <span data-ttu-id="4eabc-113">此 GridView 包含 HyperLinkField，呈现为指向第二页，传递的`SupplierID`中查询字符串。</span><span class="sxs-lookup"><span data-stu-id="4eabc-113">This GridView included a HyperLinkField, which rendered as a link to a second page, passing along the `SupplierID` in the querystring.</span></span> <span data-ttu-id="4eabc-114">使用一个 GridView，第二个页列出所选供应商提供的这些产品。</span><span class="sxs-lookup"><span data-stu-id="4eabc-114">The second page used a GridView to list those products provided by the selected supplier.</span></span>

<span data-ttu-id="4eabc-115">可以使用 DataList 和转发器控件来完成此类的两页主/详细信息报表。</span><span class="sxs-lookup"><span data-stu-id="4eabc-115">Such two-page master/detail reports can be accomplished using DataList and Repeater controls as well.</span></span> <span data-ttu-id="4eabc-116">唯一的区别在于，DataList 和转发器都不提供支持 HyperLinkField 控件。</span><span class="sxs-lookup"><span data-stu-id="4eabc-116">The only difference is that neither the DataList nor the Repeater provides support for the HyperLinkField control.</span></span> <span data-ttu-id="4eabc-117">相反，我们必须添加超链接 Web 控件或定位 HTML 元素 (`<a>`) 中控件的`ItemTemplate`。</span><span class="sxs-lookup"><span data-stu-id="4eabc-117">Instead, we must add a HyperLink Web control or an anchor HTML element (`<a>`) within the control's `ItemTemplate`.</span></span> <span data-ttu-id="4eabc-118">超链接的`NavigateUrl`属性或定位点的`href`属性可以然后使用自定义声明性或以编程方式的方法。</span><span class="sxs-lookup"><span data-stu-id="4eabc-118">The HyperLink's `NavigateUrl` property or the anchor's `href` attribute can then be customized using declarative or programmatic approaches.</span></span>

<span data-ttu-id="4eabc-119">在本教程中我们将探讨一个示例，其中列出了使用转发器控件的一个页上的项目符号列表中的类别。</span><span class="sxs-lookup"><span data-stu-id="4eabc-119">In this tutorial we'll explore an example that lists the categories in a bulleted list on one page using a Repeater control.</span></span> <span data-ttu-id="4eabc-120">每个列表项将包括该类别的名称和描述，具有到第二个页面的链接的形式显示的类别名称。</span><span class="sxs-lookup"><span data-stu-id="4eabc-120">Each list item will include the category's name and description, with the category name displayed as a link to a second page.</span></span> <span data-ttu-id="4eabc-121">单击此链接将 whisk 到第二个页面中，用户 DataList 其中将显示属于所选类别这些产品。</span><span class="sxs-lookup"><span data-stu-id="4eabc-121">Clicking on this link will whisk the user to the second page, where a DataList will show those products that belong to the selected category.</span></span>

## <a name="step-1-displaying-the-categories-in-a-bulleted-list"></a><span data-ttu-id="4eabc-122">步骤 1： 在项目符号列表中显示的类别</span><span class="sxs-lookup"><span data-stu-id="4eabc-122">Step 1: Displaying the Categories in a Bulleted List</span></span>

<span data-ttu-id="4eabc-123">创建任何主/详细信息报表的第一步是首先显示的"主"的记录。</span><span class="sxs-lookup"><span data-stu-id="4eabc-123">The first step in creating any master/detail report is to start by displaying the "master" records.</span></span> <span data-ttu-id="4eabc-124">因此，我们第一个任务是在"主"页上显示类别。</span><span class="sxs-lookup"><span data-stu-id="4eabc-124">Therefore, our first task is to display the categories in the "master" page.</span></span> <span data-ttu-id="4eabc-125">打开`CategoryListMaster.aspx`页面`DataListRepeaterFiltering`文件夹中，添加转发器控件，，和从智能标记中，选择要添加新对象数据源。</span><span class="sxs-lookup"><span data-stu-id="4eabc-125">Open the `CategoryListMaster.aspx` page in the `DataListRepeaterFiltering` folder, add a Repeater control, and, from the smart tag, opt to add a new ObjectDataSource.</span></span> <span data-ttu-id="4eabc-126">配置新对象数据源，以便访问其数据从`CategoriesBLL`类的`GetCategories`方法 （请参见图 1）。</span><span class="sxs-lookup"><span data-stu-id="4eabc-126">Configure the new ObjectDataSource so that it accesses its data from the `CategoriesBLL` class's `GetCategories` method (see Figure 1).</span></span>


<span data-ttu-id="4eabc-127">[![配置对象数据源以使用 CategoriesBLL 类 GetCategories 方法](master-detail-filtering-acess-two-pages-datalist-cs/_static/image2.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="4eabc-127">[![Configure the ObjectDataSource to Use the CategoriesBLL Class's GetCategories Method](master-detail-filtering-acess-two-pages-datalist-cs/_static/image2.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image1.png)</span></span>

<span data-ttu-id="4eabc-128">**图 1**： 配置使用 ObjectDataSource`CategoriesBLL`类的`GetCategories`方法 ([单击以查看实际尺寸的图像](master-detail-filtering-acess-two-pages-datalist-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="4eabc-128">**Figure 1**: Configure the ObjectDataSource to Use the `CategoriesBLL` Class's `GetCategories` Method ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image3.png))</span></span>


<span data-ttu-id="4eabc-129">接下来，定义转发器的模板，以便它将显示每个类别名称和描述，并为项目符号列表中的项。</span><span class="sxs-lookup"><span data-stu-id="4eabc-129">Next, define the Repeater's templates such that it displays each category name and description as an item in a bulleted list.</span></span> <span data-ttu-id="4eabc-130">让我们尚不担心具有每个类别的详细信息页的链接。</span><span class="sxs-lookup"><span data-stu-id="4eabc-130">Let's not yet worry about having each category link to the details page.</span></span> <span data-ttu-id="4eabc-131">下面显示的转发器和对象数据源中的声明性的标记：</span><span class="sxs-lookup"><span data-stu-id="4eabc-131">The following shows the declarative markup for the Repeater and ObjectDataSource:</span></span>

[!code-aspx[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample1.aspx)]

<span data-ttu-id="4eabc-132">完成此标记中，与需要花费一段时间来查看我们通过浏览器的进度。</span><span class="sxs-lookup"><span data-stu-id="4eabc-132">With this markup complete, take a moment to view our progress through a browser.</span></span> <span data-ttu-id="4eabc-133">如图 2 所示，转发器将呈现为一个项目符号列表，显示每个类别的名称和描述。</span><span class="sxs-lookup"><span data-stu-id="4eabc-133">As Figure 2 shows, the Repeater renders as a bulleted list showing each category's name and description.</span></span>


<span data-ttu-id="4eabc-134">[![每个类别显示为项目符号列表项](master-detail-filtering-acess-two-pages-datalist-cs/_static/image5.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="4eabc-134">[![Each Category is Displayed as a Bulleted List Item](master-detail-filtering-acess-two-pages-datalist-cs/_static/image5.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image4.png)</span></span>

<span data-ttu-id="4eabc-135">**图 2**： 每个类别显示为项目符号列表项 ([单击以查看实际尺寸的图像](master-detail-filtering-acess-two-pages-datalist-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="4eabc-135">**Figure 2**: Each Category is Displayed as a Bulleted List Item ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image6.png))</span></span>


## <a name="step-2-turning-the-category-name-into-a-link-to-the-details-page"></a><span data-ttu-id="4eabc-136">步骤 2： 将转换的详细信息页的链接的类别名称</span><span class="sxs-lookup"><span data-stu-id="4eabc-136">Step 2: Turning the Category Name into a Link to the Details Page</span></span>

<span data-ttu-id="4eabc-137">若要允许的用户以显示给定的类别中的"详细信息"信息，我们需要添加到每个项目符号列表项，如果单击，则将需要对用户发出的第二页的链接 (`ProductsForCategoryDetails.aspx`)。</span><span class="sxs-lookup"><span data-stu-id="4eabc-137">To allow a user to display the "details" information for a given category, we need to add a link to each bulleted list item that, when clicked, will take the user to the second page (`ProductsForCategoryDetails.aspx`).</span></span> <span data-ttu-id="4eabc-138">然后，此第二个页面将显示使用 DataList 所选类别的产品。</span><span class="sxs-lookup"><span data-stu-id="4eabc-138">This second page will then display the products for the selected category using a DataList.</span></span> <span data-ttu-id="4eabc-139">为了确定被单击其链接的类别，我们需要通过单击的类别`CategoryID`通过某种机制的第二页。</span><span class="sxs-lookup"><span data-stu-id="4eabc-139">In order to determine the category whose link was clicked, we need to pass the clicked category's `CategoryID` to the second page through some mechanism.</span></span> <span data-ttu-id="4eabc-140">将标量数据从一页传输到另一个的最简单、 最简单方法是通过查询字符串，我们将在本教程中使用此选项。</span><span class="sxs-lookup"><span data-stu-id="4eabc-140">The simplest, most straightforward way to transfer scalar data from one page to another is through the querystring, which is the option we'll use in this tutorial.</span></span> <span data-ttu-id="4eabc-141">具体而言，`ProductsForCategoryDetails.aspx`页应所选*`categoryID`* 要先通过名为的查询字符串字段值`CategoryID`。</span><span class="sxs-lookup"><span data-stu-id="4eabc-141">In particular, the `ProductsForCategoryDetails.aspx` page will expect the selected *`categoryID`* value to be passed through a querystring field named `CategoryID`.</span></span> <span data-ttu-id="4eabc-142">例如，若要查看饮料类别的产品具有`CategoryID`为 1，用户需要访问`ProductsForCategoryDetails.aspx?CategoryID=1`。</span><span class="sxs-lookup"><span data-stu-id="4eabc-142">For example, to view the products for the Beverages category, which has a `CategoryID` of 1, a user would visit `ProductsForCategoryDetails.aspx?CategoryID=1`.</span></span>

<span data-ttu-id="4eabc-143">若要在转发器，我们需要添加超链接 Web 控件或 HTML 定位点元素中创建每个项目符号列表项的超链接 (`<a>`) 到`ItemTemplate`。</span><span class="sxs-lookup"><span data-stu-id="4eabc-143">To create a hyperlink for each bulleted list item in the Repeater we need to either add a HyperLink Web control or an HTML anchor element (`<a>`) to the `ItemTemplate`.</span></span> <span data-ttu-id="4eabc-144">中的超链接的方案显示为每个行相同，这两种方法就足够了。</span><span class="sxs-lookup"><span data-stu-id="4eabc-144">In scenarios where the hyperlink is displayed the same for each row, either approach will suffice.</span></span> <span data-ttu-id="4eabc-145">为重复字符，但我更喜欢使用定位元素。</span><span class="sxs-lookup"><span data-stu-id="4eabc-145">For Repeaters, I prefer using the anchor element.</span></span> <span data-ttu-id="4eabc-146">若要使用的定位点元素，请更新到的转发器的 ItemTemplate:</span><span class="sxs-lookup"><span data-stu-id="4eabc-146">To use the anchor element, update the Repeater's ItemTemplate to:</span></span>

[!code-aspx[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample2.aspx)]

<span data-ttu-id="4eabc-147">请注意，`CategoryID`可直接在定位元素内插入`href`属性; 不过，若要执行因此请务必分隔`href`属性的值，该值撇号 （，注意引号），因为`Eval`方法在`href`属性分隔其字符串 (`"CategoryID"`) 用引号引起来。</span><span class="sxs-lookup"><span data-stu-id="4eabc-147">Note that the `CategoryID` can be injected directly within the anchor element's `href` attribute; however, to do so be certain to delimit the `href` attribute's value with apostrophes (and note quotation marks) since the `Eval` method within the `href` attribute delimits its string (`"CategoryID"`) with quotation marks.</span></span> <span data-ttu-id="4eabc-148">或者，可以改为使用超链接 Web 控件：</span><span class="sxs-lookup"><span data-stu-id="4eabc-148">Alternatively, a HyperLink Web control can be used instead:</span></span>

[!code-aspx[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample3.aspx)]

<span data-ttu-id="4eabc-149">请注意如何 URL 的静态部分 — `ProductsForCategoryDetails.aspx?CategoryID` -追加到的结果`Eval("CategoryID")`直接内使用字符串串联的数据绑定语法。</span><span class="sxs-lookup"><span data-stu-id="4eabc-149">Note how the static portion of the URL — `ProductsForCategoryDetails.aspx?CategoryID` — is appended to the result of `Eval("CategoryID")` directly within the databinding syntax using string concatenation.</span></span>

<span data-ttu-id="4eabc-150">使用超链接控件的一个优点是，它可以以编程方式访问从转发器的`ItemDataBound`事件处理程序，如果需要。</span><span class="sxs-lookup"><span data-stu-id="4eabc-150">One benefit of using the HyperLink control is that it can be programmatically accessed from the Repeater's `ItemDataBound` event handler, if needed.</span></span> <span data-ttu-id="4eabc-151">例如，你可能想要为文本而不是与任何关联的产品类别的链接的形式显示的类别名称。</span><span class="sxs-lookup"><span data-stu-id="4eabc-151">For example, you might want to display the category name as text rather than as a link for categories with no associated products.</span></span> <span data-ttu-id="4eabc-152">无法在以编程方式执行此类检查`ItemDataBound`事件处理程序; 对于不带类别关联的产品，超链接`NavigateUrl`属性无法设置为空字符串，从而导致该特定的类别名称呈现为纯文本 （而不是一个链接）。</span><span class="sxs-lookup"><span data-stu-id="4eabc-152">Such a check could be programmatically performed in the `ItemDataBound` event handler; for categories with no associated products, the HyperLink's `NavigateUrl` property could be set to a blank string, thereby resulting in that particular category name rendering as plain text (rather than as a link).</span></span> <span data-ttu-id="4eabc-153">将回指[格式设置的 DataList 和数据后转发器基于](../displaying-data-with-the-datalist-and-repeater/formatting-the-datalist-and-repeater-based-upon-data-cs.md)有关格式设置 DataList 和转发器的内容的详细信息的教程基于通过编程逻辑`ItemDataBound`事件处理程序。</span><span class="sxs-lookup"><span data-stu-id="4eabc-153">Refer back to the [Formatting the DataList and Repeater Based Upon Data](../displaying-data-with-the-datalist-and-repeater/formatting-the-datalist-and-repeater-based-upon-data-cs.md) tutorial for more information on formatting the DataList and Repeater's contents based on programmatic logic through the `ItemDataBound` event handler.</span></span>

<span data-ttu-id="4eabc-154">如果内容的观众，随意使用你在页面中的定位元素或超链接控件方法。</span><span class="sxs-lookup"><span data-stu-id="4eabc-154">If you are following along, feel free to use either the anchor element or HyperLink control approach in your page.</span></span> <span data-ttu-id="4eabc-155">无论方法中，查看通过浏览器的每个类别名称应呈现为链接到网页时`ProductsForCategoryDetails.aspx`，并传入适用`CategoryID`值 （请参见图 3）。</span><span class="sxs-lookup"><span data-stu-id="4eabc-155">Regardless of the approach, when viewing the page through a browser each category name should be rendered as a link to `ProductsForCategoryDetails.aspx`, passing in the applicable `CategoryID` value (see Figure 3).</span></span>


<span data-ttu-id="4eabc-156">[![类别名称现在将链接到 ProductsForCategoryDetails.aspx](master-detail-filtering-acess-two-pages-datalist-cs/_static/image8.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="4eabc-156">[![The Category Names Now Link to ProductsForCategoryDetails.aspx](master-detail-filtering-acess-two-pages-datalist-cs/_static/image8.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image7.png)</span></span>

<span data-ttu-id="4eabc-157">**图 3**: 类别名称现在指向`ProductsForCategoryDetails.aspx`([单击以查看实际尺寸的图像](master-detail-filtering-acess-two-pages-datalist-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="4eabc-157">**Figure 3**: The Category Names Now Link to `ProductsForCategoryDetails.aspx` ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image9.png))</span></span>


## <a name="step-3-listing-the-products-that-belong-to-the-selected-category"></a><span data-ttu-id="4eabc-158">步骤 3： 列出属于所选类别的产品</span><span class="sxs-lookup"><span data-stu-id="4eabc-158">Step 3: Listing the Products that Belong to the Selected Category</span></span>

<span data-ttu-id="4eabc-159">与`CategoryListMaster.aspx`完成的页上，我们已准备好将实现"详细信息"页中，我们工作重心`ProductsForCategoryDetails.aspx`。</span><span class="sxs-lookup"><span data-stu-id="4eabc-159">With the `CategoryListMaster.aspx` page complete, we're ready to turn our attention to implementing the "details" page, `ProductsForCategoryDetails.aspx`.</span></span> <span data-ttu-id="4eabc-160">打开此页，将 DataList 拖动从工具箱中拖动到设计器中，并设置其`ID`属性`ProductsInCategory`。</span><span class="sxs-lookup"><span data-stu-id="4eabc-160">Open this page, drag a DataList from the Toolbox onto the Designer, and set its `ID` property to `ProductsInCategory`.</span></span> <span data-ttu-id="4eabc-161">接下来，从 DataList 的智能标记选择将新对象数据源添加到页上，其命名为`ProductsInCategoryDataSource`。</span><span class="sxs-lookup"><span data-stu-id="4eabc-161">Next, from the DataList's smart tag choose to add a new ObjectDataSource to the page, naming it `ProductsInCategoryDataSource`.</span></span> <span data-ttu-id="4eabc-162">将其配置，以便它调用`ProductsBLL`类的`GetProductsByCategoryID(categoryID)`方法; 设置为 （无） INSERT、 UPDATE 和 DELETE 选项卡中列出的下拉列表。</span><span class="sxs-lookup"><span data-stu-id="4eabc-162">Configure it such that it calls the `ProductsBLL` class's `GetProductsByCategoryID(categoryID)` method; set the drop-down lists in the INSERT, UPDATE, and DELETE tabs to (None).</span></span>


<span data-ttu-id="4eabc-163">[![配置对象数据源以使用 ProductsBLL 类 GetProductsByCategoryID(categoryID) 方法](master-detail-filtering-acess-two-pages-datalist-cs/_static/image11.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="4eabc-163">[![Configure the ObjectDataSource to Use the ProductsBLL Class's GetProductsByCategoryID(categoryID) Method](master-detail-filtering-acess-two-pages-datalist-cs/_static/image11.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image10.png)</span></span>

<span data-ttu-id="4eabc-164">**图 4**： 配置使用 ObjectDataSource`ProductsBLL`类的`GetProductsByCategoryID(categoryID)`方法 ([单击以查看实际尺寸的图像](master-detail-filtering-acess-two-pages-datalist-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="4eabc-164">**Figure 4**: Configure the ObjectDataSource to Use the `ProductsBLL` Class's `GetProductsByCategoryID(categoryID)` Method ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image12.png))</span></span>


<span data-ttu-id="4eabc-165">由于`GetProductsByCategoryID(categoryID)`方法接受一个输入的参数 (*`categoryID`*)，选择数据源向导为我们提供了机会指定参数的源。</span><span class="sxs-lookup"><span data-stu-id="4eabc-165">Since the `GetProductsByCategoryID(categoryID)` method accepts an input parameter (*`categoryID`*), the Choose Data Source wizard offers us an opportunity to specify the parameter's source.</span></span> <span data-ttu-id="4eabc-166">将参数源设置为查询字符串使用 QueryStringField `CategoryID`。</span><span class="sxs-lookup"><span data-stu-id="4eabc-166">Set the parameter source to QueryString using the QueryStringField `CategoryID`.</span></span>


<span data-ttu-id="4eabc-167">[![使用作为参数的源的查询字符串字段 CategoryID](master-detail-filtering-acess-two-pages-datalist-cs/_static/image14.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="4eabc-167">[![Use the Querystring Field CategoryID as the Parameter's Source](master-detail-filtering-acess-two-pages-datalist-cs/_static/image14.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image13.png)</span></span>

<span data-ttu-id="4eabc-168">**图 5**： 使用查询字符串字段`CategoryID`作为参数的源 ([单击以查看实际尺寸的图像](master-detail-filtering-acess-two-pages-datalist-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="4eabc-168">**Figure 5**: Use the Querystring Field `CategoryID` as the Parameter's Source ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image15.png))</span></span>


<span data-ttu-id="4eabc-169">正如我们已完成选择数据源向导后看到在上一个教程中，Visual Studio 将自动创建`ItemTemplate`为 DataList，其中列出了每个数据字段名称和值。</span><span class="sxs-lookup"><span data-stu-id="4eabc-169">As we've seen in previous tutorials, after completing the Choose Data Source wizard, Visual Studio automatically creates an `ItemTemplate` for the DataList that lists each data field name and value.</span></span> <span data-ttu-id="4eabc-170">替换此模板，其中列出了仅产品的名称、 供应商和价格。</span><span class="sxs-lookup"><span data-stu-id="4eabc-170">Replace this template with one that lists only the product's name, supplier, and price.</span></span> <span data-ttu-id="4eabc-171">此外，还要设置 DataList`RepeatColumns`属性设置为 2。</span><span class="sxs-lookup"><span data-stu-id="4eabc-171">Also, set the DataList's `RepeatColumns` property to 2.</span></span> <span data-ttu-id="4eabc-172">这些更改后 DataList 和对象数据源的声明性标记应看起来类似以下：</span><span class="sxs-lookup"><span data-stu-id="4eabc-172">After these changes, your DataList and ObjectDataSource's declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample4.aspx)]

<span data-ttu-id="4eabc-173">若要在操作中查看该页，从启动`CategoryListMaster.aspx`页; 接下来，单击类别项目符号列表中的链接。</span><span class="sxs-lookup"><span data-stu-id="4eabc-173">To view this page in action, start from the `CategoryListMaster.aspx` page; next, click on a link in the categories bulleted list.</span></span> <span data-ttu-id="4eabc-174">这样你将转到`ProductsForCategoryDetails.aspx`，并传递沿`CategoryID`通过查询字符串。</span><span class="sxs-lookup"><span data-stu-id="4eabc-174">Doing so will take you to `ProductsForCategoryDetails.aspx`, passing along the `CategoryID` through the querystring.</span></span> <span data-ttu-id="4eabc-175">`ProductsInCategoryDataSource`中的 ObjectDataSource`ProductsForCategoryDetails.aspx`将仅对这些产品获取指定的类别并在 DataList，这使这两种产品每行中显示它们。</span><span class="sxs-lookup"><span data-stu-id="4eabc-175">The `ProductsInCategoryDataSource` ObjectDataSource in `ProductsForCategoryDetails.aspx` will then get just those products for the specified category and display them in the DataList, which renders two products per row.</span></span> <span data-ttu-id="4eabc-176">图 6 显示的屏幕截图`ProductsForCategoryDetails.aspx`查看饮料时。</span><span class="sxs-lookup"><span data-stu-id="4eabc-176">Figure 6 shows a screenshot of `ProductsForCategoryDetails.aspx` when viewing the Beverages.</span></span>


<span data-ttu-id="4eabc-177">[![显示饮料，每行的两个](master-detail-filtering-acess-two-pages-datalist-cs/_static/image17.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="4eabc-177">[![The Beverages are Displayed, Two per Row](master-detail-filtering-acess-two-pages-datalist-cs/_static/image17.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image16.png)</span></span>

<span data-ttu-id="4eabc-178">**图 6**： 显示饮料，每行的两个 ([单击以查看实际尺寸的图像](master-detail-filtering-acess-two-pages-datalist-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="4eabc-178">**Figure 6**: The Beverages are Displayed, Two per Row ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image18.png))</span></span>


## <a name="step-4-displaying-category-information-on-productsforcategorydetailsaspx"></a><span data-ttu-id="4eabc-179">步骤 4： 在 ProductsForCategoryDetails.aspx 上显示类别信息</span><span class="sxs-lookup"><span data-stu-id="4eabc-179">Step 4: Displaying Category Information on ProductsForCategoryDetails.aspx</span></span>

<span data-ttu-id="4eabc-180">当用户单击中的类别`CategoryListMaster.aspx`，就会进入`ProductsForCategoryDetails.aspx`和显示属于所选类别的产品。</span><span class="sxs-lookup"><span data-stu-id="4eabc-180">When a user clicks on a category in `CategoryListMaster.aspx`, they are taken to `ProductsForCategoryDetails.aspx` and shown the products that belong to the selected category.</span></span> <span data-ttu-id="4eabc-181">但是，在`ProductsForCategoryDetails.aspx`有关于选择哪种类别没有视觉提示。</span><span class="sxs-lookup"><span data-stu-id="4eabc-181">However, in `ProductsForCategoryDetails.aspx` there are no visual cues as to what category was selected.</span></span> <span data-ttu-id="4eabc-182">用户应单击饮料，但会意外地单击的调味品还没有的方法的意识到他们的错误操作，一旦达到`ProductsForCategoryDetails.aspx`。</span><span class="sxs-lookup"><span data-stu-id="4eabc-182">A user that meant to click Beverages, but accidentally clicked Condiments, has no way of realizing their mistake once they reach `ProductsForCategoryDetails.aspx`.</span></span> <span data-ttu-id="4eabc-183">若要缓解此潜在问题，我们可以显示有关所选类别的信息 — 其名称和说明-顶部`ProductsForCategoryDetails.aspx`页。</span><span class="sxs-lookup"><span data-stu-id="4eabc-183">To alleviate this potential problem, we can display information about the selected category — its name and description — at the top of the `ProductsForCategoryDetails.aspx` page.</span></span>

<span data-ttu-id="4eabc-184">若要完成此操作，将添加在转发器控件中的上方 FormView `ProductsForCategoryDetails.aspx`。</span><span class="sxs-lookup"><span data-stu-id="4eabc-184">To accomplish this, add a FormView above the Repeater control in `ProductsForCategoryDetails.aspx`.</span></span> <span data-ttu-id="4eabc-185">接下来，从名为 FormView 的智能标记将新对象数据源添加到页`CategoryDataSource`和将其配置为使用`CategoriesBLL`类的`GetCategoryByCategoryID(categoryID)`方法。</span><span class="sxs-lookup"><span data-stu-id="4eabc-185">Next, add a new ObjectDataSource to the page from the FormView's smart tag named `CategoryDataSource` and configure it to use the `CategoriesBLL` class's `GetCategoryByCategoryID(categoryID)` method.</span></span>


<span data-ttu-id="4eabc-186">[![有关通过 CategoriesBLL 类 GetCategoryByCategoryID(categoryID) 方法的类别的访问信息](master-detail-filtering-acess-two-pages-datalist-cs/_static/image20.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="4eabc-186">[![Access Information about the Category through the CategoriesBLL Class's GetCategoryByCategoryID(categoryID) Method](master-detail-filtering-acess-two-pages-datalist-cs/_static/image20.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image19.png)</span></span>

<span data-ttu-id="4eabc-187">**图 7**： 访问有关通过类别信息`CategoriesBLL`类的`GetCategoryByCategoryID(categoryID)`方法 ([单击以查看实际尺寸的图像](master-detail-filtering-acess-two-pages-datalist-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="4eabc-187">**Figure 7**: Access Information about the Category through the `CategoriesBLL` Class's `GetCategoryByCategoryID(categoryID)` Method ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image21.png))</span></span>


<span data-ttu-id="4eabc-188">与`ProductsInCategoryDataSource`ObjectDataSource 添加在步骤 3 中，`CategoryDataSource`的配置数据源向导将提示我们提供的源`GetCategoryByCategoryID(categoryID)`方法的输入参数。</span><span class="sxs-lookup"><span data-stu-id="4eabc-188">As with the `ProductsInCategoryDataSource` ObjectDataSource added in Step 3, the `CategoryDataSource`'s Configure Data Source wizard prompts us for a source for the `GetCategoryByCategoryID(categoryID)` method's input parameter.</span></span> <span data-ttu-id="4eabc-189">使用完全相同的设置为之前，将参数源设置为查询字符串和 QueryStringField 值赋给`CategoryID`（回头参考图 5 中）。</span><span class="sxs-lookup"><span data-stu-id="4eabc-189">Use the exact same settings as before, setting the parameter source to QueryString and the QueryStringField value to `CategoryID` (refer back to Figure 5).</span></span>

<span data-ttu-id="4eabc-190">完成向导后，Visual Studio 自动创建`ItemTemplate`， `EditItemTemplate`，和`InsertItemTemplate`FormView 有关。</span><span class="sxs-lookup"><span data-stu-id="4eabc-190">After completing the wizard, Visual Studio automatically creates an `ItemTemplate`, `EditItemTemplate`, and `InsertItemTemplate` for the FormView.</span></span> <span data-ttu-id="4eabc-191">由于我们提供只读接口，请尝试删除`EditItemTemplate`和`InsertItemTemplate`。</span><span class="sxs-lookup"><span data-stu-id="4eabc-191">Since we're providing a read-only interface, feel free to remove the `EditItemTemplate` and `InsertItemTemplate`.</span></span> <span data-ttu-id="4eabc-192">此外，随意自定义 FormView `ItemTemplate`。</span><span class="sxs-lookup"><span data-stu-id="4eabc-192">Also, feel free to customize the FormView's `ItemTemplate`.</span></span> <span data-ttu-id="4eabc-193">删除多余的模板和自定义 ItemTemplate 之后, 你 FormView 和对象数据源的声明性标记应如下类似于以下：</span><span class="sxs-lookup"><span data-stu-id="4eabc-193">After removing the superfluous templates and customizing the ItemTemplate, your FormView and ObjectDataSource's declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample5.aspx)]

<span data-ttu-id="4eabc-194">图 8 显示屏幕截图时查看通过浏览器的此页。</span><span class="sxs-lookup"><span data-stu-id="4eabc-194">Figure 8 shows a screen shot when viewing this page through a browser.</span></span>

> [!NOTE]
> <span data-ttu-id="4eabc-195">除了 FormView，我还添加了上方 FormView 需要用户定向回到类别列表中的一个超链接控件 (`CategoryListMaster.aspx`)。</span><span class="sxs-lookup"><span data-stu-id="4eabc-195">In addition to the FormView, I've also added a HyperLink control above the FormView that will take the user back to the list of categories (`CategoryListMaster.aspx`).</span></span> <span data-ttu-id="4eabc-196">随意放置此链接在其他位置，或完全忽略。</span><span class="sxs-lookup"><span data-stu-id="4eabc-196">Feel free to place this link elsewhere or to omit it altogether.</span></span>


<span data-ttu-id="4eabc-197">[![类别信息是现在显示在页面顶部](master-detail-filtering-acess-two-pages-datalist-cs/_static/image23.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="4eabc-197">[![Category Information is Now Displayed at the Top of the Page](master-detail-filtering-acess-two-pages-datalist-cs/_static/image23.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image22.png)</span></span>

<span data-ttu-id="4eabc-198">**图 8**： 类别信息是现在显示在页面顶部 ([单击以查看实际尺寸的图像](master-detail-filtering-acess-two-pages-datalist-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="4eabc-198">**Figure 8**: Category Information is Now Displayed at the Top of the Page ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image24.png))</span></span>


## <a name="step-5-displaying-a-message-if-no-products-belong-to-the-selected-category"></a><span data-ttu-id="4eabc-199">步骤 5： 将显示一条消息，如果要安装的产品属于所选类别</span><span class="sxs-lookup"><span data-stu-id="4eabc-199">Step 5: Displaying a Message if No Products Belong to the Selected Category</span></span>

<span data-ttu-id="4eabc-200">`CategoryListMaster.aspx`页列出所有类别在系统中，而不考虑是否有任何关联的产品。</span><span class="sxs-lookup"><span data-stu-id="4eabc-200">The `CategoryListMaster.aspx` page lists all categories in the system, regardless of whether there are any associated products.</span></span> <span data-ttu-id="4eabc-201">如果用户单击与任何关联的产品，在 DataList 类别`ProductsForCategoryDetails.aspx`将不会呈现，因为其数据源将不具有任何项。</span><span class="sxs-lookup"><span data-stu-id="4eabc-201">If a user clicks on a category with no associated products, the DataList in `ProductsForCategoryDetails.aspx` will not be rendered, as its data source will not have any items.</span></span> <span data-ttu-id="4eabc-202">GridView 如我们所见过去教程中，提供`EmptyDataText`属性，可以用于指定要显示在其数据源中不有任何记录的文本消息。</span><span class="sxs-lookup"><span data-stu-id="4eabc-202">As we've seen in past tutorials, the GridView provides an `EmptyDataText` property that can be used to specify a text message to display if there are no records in its data source.</span></span> <span data-ttu-id="4eabc-203">遗憾的是，DataList 和转发器都不具有此类的属性。</span><span class="sxs-lookup"><span data-stu-id="4eabc-203">Unfortunately, neither the DataList nor Repeater has such a property.</span></span>

<span data-ttu-id="4eabc-204">为了显示消息，告知用户，所选类别不匹配的产品，我们需要添加一个标签控件到页`Text`属性分配要显示的事件中有不匹配的产品的消息。</span><span class="sxs-lookup"><span data-stu-id="4eabc-204">In order to display a message informing the user that there are no matching products for the selected category, we need to add a Label control to the page whose `Text` property is assigned the message to display in the event that there are no matching products.</span></span> <span data-ttu-id="4eabc-205">我们然后需要以编程方式设置其`Visible`属性基于 DataList 是否包含任何项。</span><span class="sxs-lookup"><span data-stu-id="4eabc-205">We then need to programmatically set its `Visible` property based on whether or not the DataList contains any items.</span></span>

<span data-ttu-id="4eabc-206">若要完成此操作，首先添加下 DataList 标签。</span><span class="sxs-lookup"><span data-stu-id="4eabc-206">To accomplish this, start by adding a Label beneath the DataList.</span></span> <span data-ttu-id="4eabc-207">设置其`ID`属性`NoProductsMessage`及其`Text`属性设置为"There are 不到所选的类别的产品"</span><span class="sxs-lookup"><span data-stu-id="4eabc-207">Set its `ID` property to `NoProductsMessage` and its `Text` property to "There are no products for the selected category…"</span></span> <span data-ttu-id="4eabc-208">接下来，我们需要以编程方式设置此标签的`Visible`属性基于是否任何数据被绑定到`ProductsInCategory`DataList。</span><span class="sxs-lookup"><span data-stu-id="4eabc-208">Next, we need to programmatically set this Label's `Visible` property based on whether or not any data was bound to the `ProductsInCategory` DataList.</span></span> <span data-ttu-id="4eabc-209">数据已绑定到 DataList 之后，必须进行此分配。</span><span class="sxs-lookup"><span data-stu-id="4eabc-209">This assignment must be made after the data has been bound to the DataList.</span></span> <span data-ttu-id="4eabc-210">对于 GridView，说明如何和 FormView，我们无法创建控件的事件处理程序`DataBound`触发后数据绑定已完成的事件。</span><span class="sxs-lookup"><span data-stu-id="4eabc-210">For the GridView, DetailsView, and FormView, we could create an event handler for the control's `DataBound` event, which fires after databinding has completed.</span></span> <span data-ttu-id="4eabc-211">但是，DataList 和转发器都不具有`DataBound`事件可用。</span><span class="sxs-lookup"><span data-stu-id="4eabc-211">However, neither the DataList nor the Repeater has a `DataBound` event available.</span></span>

<span data-ttu-id="4eabc-212">对于此特定示例中，我们可以分配标签的`Visible`中的属性`Page_Load`事件处理程序，因为数据将已分配给页面的之前 DataList`Load`事件。</span><span class="sxs-lookup"><span data-stu-id="4eabc-212">For this particular example we can assign the Label's `Visible` property in the `Page_Load` event handler, since the data will have been assigned to the DataList prior to the page's `Load` event.</span></span> <span data-ttu-id="4eabc-213">但是，此方法将无法在一般情况下，按工作对象数据源中的数据可能会绑定到更高版本中页面的生命周期 DataList。</span><span class="sxs-lookup"><span data-stu-id="4eabc-213">However, this approach would not work in the general case, as the data from the ObjectDataSource might be bound to the DataList later in the page's lifecycle.</span></span> <span data-ttu-id="4eabc-214">例如，如果显示的数据基于另一个控件中的值，例如显示主/详细信息报表使用的 DropDownList 来保存的"主"的记录时，数据可能不重新绑定到数据的 Web 控件之前`PreRender`阶段中页面的生命周期。</span><span class="sxs-lookup"><span data-stu-id="4eabc-214">For example, if the displayed data is based upon the value in another control, such as it is when displaying a master/detail report using a DropDownList to hold the "master" records, the data may not rebound to the data Web control until the `PreRender` stage in the page's life cycle.</span></span>

<span data-ttu-id="4eabc-215">该值将适用于所有情况下的一种解决方案是将分配`Visible`属性`False`中 DataList `ItemDataBound` (或`ItemCreated`) 事件处理程序绑定的项类型时`Item`或`AlternatingItem`。</span><span class="sxs-lookup"><span data-stu-id="4eabc-215">One solution which will work for all cases is to assign the `Visible` property to `False` in the DataList's `ItemDataBound` (or `ItemCreated`) event handler when binding an item type of `Item` or `AlternatingItem`.</span></span> <span data-ttu-id="4eabc-216">在这种情况下我们知道是否有至少一个数据在数据源中项，并因此可以隐藏`NoProductsMessage`标签。</span><span class="sxs-lookup"><span data-stu-id="4eabc-216">In such a case we know that there is at least one data item in the data source and therefore can hide the `NoProductsMessage` Label.</span></span> <span data-ttu-id="4eabc-217">除了此事件处理程序中，我们还需要一个事件处理程序用于 DataList`DataBinding`事件，其中我们初始化标签的`Visible`属性`True`。</span><span class="sxs-lookup"><span data-stu-id="4eabc-217">In addition to this event handler, we also need an event handler for the DataList's `DataBinding` event, where we initialize the Label's `Visible` property to `True`.</span></span> <span data-ttu-id="4eabc-218">由于`DataBinding`之前激发事件`ItemDataBound`事件，标签`Visible`属性最初将设置为`True`; 如果没有任何数据项目，但是，它将设置为`False`。</span><span class="sxs-lookup"><span data-stu-id="4eabc-218">Since the `DataBinding` event fires before the `ItemDataBound` events, the Label's `Visible` property will initially be set to `True`; if there are any data items, however, it will be set to `False`.</span></span> <span data-ttu-id="4eabc-219">下面的代码实现此逻辑：</span><span class="sxs-lookup"><span data-stu-id="4eabc-219">The following code implements this logic:</span></span>

[!code-csharp[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample6.cs)]

<span data-ttu-id="4eabc-220">所有 Northwind 数据库中的类别对一个或多个产品均相关联。</span><span class="sxs-lookup"><span data-stu-id="4eabc-220">All of the categories in the Northwind database are associated with one or more products.</span></span> <span data-ttu-id="4eabc-221">若要测试此功能，我已手动调整 Northwind 数据库为本教程中，重新分配与生成类别关联的所有产品 (`CategoryID` = 7) 到数据项类别 (`CategoryID` = 8)。</span><span class="sxs-lookup"><span data-stu-id="4eabc-221">To test this feature, I've manually adjusted the Northwind database for this tutorial, reassigning all products associated with the Produce category (`CategoryID` = 7) to the Seafood category (`CategoryID` = 8).</span></span> <span data-ttu-id="4eabc-222">这可以实现从服务器资源管理器通过选择新查询，并使用以下`UPDATE`语句：</span><span class="sxs-lookup"><span data-stu-id="4eabc-222">This can be accomplished from the Server Explorer by choosing New Query and using the following `UPDATE` statement:</span></span>

[!code-sql[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample7.sql)]

<span data-ttu-id="4eabc-223">相应地更新数据库之后, 返回到`CategoryListMaster.aspx`页上，单击生成链接。</span><span class="sxs-lookup"><span data-stu-id="4eabc-223">After updating the database accordingly, return to the `CategoryListMaster.aspx` page and click on the Produce link.</span></span> <span data-ttu-id="4eabc-224">因为不再有任何属于生成类别的产品，你应该会看到"There are 不到所选的类别的产品"</span><span class="sxs-lookup"><span data-stu-id="4eabc-224">Since there are no longer any products belonging to the Produce category, you should see the "There are no products for the selected category…"</span></span> <span data-ttu-id="4eabc-225">消息，如图 9 中所示。</span><span class="sxs-lookup"><span data-stu-id="4eabc-225">message, as shown in Figure 9.</span></span>


<span data-ttu-id="4eabc-226">[![如果有任何产品属于所选分类，显示一条消息](master-detail-filtering-acess-two-pages-datalist-cs/_static/image26.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="4eabc-226">[![A Message is Displayed if there are No Products Belonging to the Selected Category](master-detail-filtering-acess-two-pages-datalist-cs/_static/image26.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image25.png)</span></span>

<span data-ttu-id="4eabc-227">**图 9**： 如果有任何产品属于所选分类将显示消息 ([单击以查看实际尺寸的图像](master-detail-filtering-acess-two-pages-datalist-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="4eabc-227">**Figure 9**: A Message is Displayed if there are No Products Belonging to the Selected Category ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image27.png))</span></span>


## <a name="summary"></a><span data-ttu-id="4eabc-228">总结</span><span class="sxs-lookup"><span data-stu-id="4eabc-228">Summary</span></span>

<span data-ttu-id="4eabc-229">尽管主/详细信息报表可以显示 master 和详细信息记录在一页，在很多网站中它们被分隔跨两个 web 页。</span><span class="sxs-lookup"><span data-stu-id="4eabc-229">While master/detail reports can display both the master and detail records on a single page, in many websites they are separated out across two web pages.</span></span> <span data-ttu-id="4eabc-230">在本教程中我们介绍了如何通过将"主"网页中使用中继器的项目符号列表中列出的类别和"详细信息"页中列出的关联的产品实现主/详细信息报表。</span><span class="sxs-lookup"><span data-stu-id="4eabc-230">In this tutorial we looked at how to implement such a master/detail report by having the categories listed in a bulleted list using a Repeater in the "master" web page and the associated products listed in the "details" page.</span></span> <span data-ttu-id="4eabc-231">母板网页中的每个列表项包含指向传递的行的详细信息页面的`CategoryID`值。</span><span class="sxs-lookup"><span data-stu-id="4eabc-231">Each list item in the master web page contained a link to the details page that passed along the row's `CategoryID` value.</span></span>

<span data-ttu-id="4eabc-232">在详细信息页中指定的提供程序检索这些产品完成通过`ProductsBLL`类的`GetProductsByCategoryID(categoryID)`方法。</span><span class="sxs-lookup"><span data-stu-id="4eabc-232">In the details page retrieving those products for the specified supplier was accomplished through the `ProductsBLL` class's `GetProductsByCategoryID(categoryID)` method.</span></span> <span data-ttu-id="4eabc-233">*`categoryID`* 使用以声明方式指定参数值`CategoryID`作为参数源的查询字符串值。</span><span class="sxs-lookup"><span data-stu-id="4eabc-233">The *`categoryID`* parameter value was specified declaratively using the `CategoryID` querystring value as the parameter source.</span></span> <span data-ttu-id="4eabc-234">我们还了解了如何在使用 FormView 的详细信息页中显示类别详细信息以及如何显示一条消息，如果没有不属于所选类别的产品。</span><span class="sxs-lookup"><span data-stu-id="4eabc-234">We also looked at how to display category details in the details page using a FormView and how to display a message if there were no products belonging to the selected category.</span></span>

<span data-ttu-id="4eabc-235">尽情享受编程 ！</span><span class="sxs-lookup"><span data-stu-id="4eabc-235">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="4eabc-236">关于作者</span><span class="sxs-lookup"><span data-stu-id="4eabc-236">About the Author</span></span>

<span data-ttu-id="4eabc-237">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml)，作者的七个 ASP/ASP.NET 书籍和的创始人[4GuysFromRolla.com](http://www.4guysfromrolla.com)，自 1998 年使用与 Microsoft Web 技术。</span><span class="sxs-lookup"><span data-stu-id="4eabc-237">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="4eabc-238">Scott 的作用是作为独立的顾问、 培训师和编写器。</span><span class="sxs-lookup"><span data-stu-id="4eabc-238">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="4eabc-239">最新书籍是[ *Sam 教授自己 ASP.NET 2.0 24 小时内*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)。</span><span class="sxs-lookup"><span data-stu-id="4eabc-239">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="4eabc-240">他可以达到在[ mitchell@4GuysFromRolla.com。](mailto:mitchell@4GuysFromRolla.com)或通过他的博客，其中可以找到在[ http://ScottOnWriting.NET ](http://ScottOnWriting.NET)。</span><span class="sxs-lookup"><span data-stu-id="4eabc-240">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="4eabc-241">特别感谢...</span><span class="sxs-lookup"><span data-stu-id="4eabc-241">Special Thanks To…</span></span>

<span data-ttu-id="4eabc-242">本教程系列已由许多有用的审阅者评审。</span><span class="sxs-lookup"><span data-stu-id="4eabc-242">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="4eabc-243">本教程中的前导审阅者已 Zack Jones 和沈 Shulok。</span><span class="sxs-lookup"><span data-stu-id="4eabc-243">Lead reviewers for this tutorial were Zack Jones and Liz Shulok.</span></span> <span data-ttu-id="4eabc-244">对感兴趣查看我即将到来的 MSDN 文章？</span><span class="sxs-lookup"><span data-stu-id="4eabc-244">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="4eabc-245">如果是这样，删除我一行[ mitchell@4GuysFromRolla.com。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="4eabc-245">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="4eabc-246">[上一页](master-detail-filtering-with-a-dropdownlist-datalist-cs.md)
> [下一页](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs.md)</span><span class="sxs-lookup"><span data-stu-id="4eabc-246">[Previous](master-detail-filtering-with-a-dropdownlist-datalist-cs.md)
[Next](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs.md)</span></span>
